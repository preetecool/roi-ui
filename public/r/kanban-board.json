{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "kanban-board",
  "type": "registry:item",
  "title": "Kanban Board",
  "description": "A full-featured kanban board with drag-and-drop functionality.",
  "dependencies": [
    "@dnd-kit/core",
    "@dnd-kit/sortable",
    "@dnd-kit/utilities",
    "lucide-react"
  ],
  "registryDependencies": [
    "https://roiui.com/r/alert-dialog.json",
    "https://roiui.com/r/avatar.json",
    "https://roiui.com/r/badge.json",
    "https://roiui.com/r/button.json",
    "https://roiui.com/r/calendar.json",
    "https://roiui.com/r/card.json",
    "https://roiui.com/r/checkbox.json",
    "https://roiui.com/r/checkbox-group.json",
    "https://roiui.com/r/combobox.json",
    "https://roiui.com/r/context-menu.json",
    "https://roiui.com/r/dialog.json",
    "https://roiui.com/r/dropdown-menu.json",
    "https://roiui.com/r/field.json",
    "https://roiui.com/r/form.json",
    "https://roiui.com/r/input.json",
    "https://roiui.com/r/kbd.json",
    "https://roiui.com/r/popover.json",
    "https://roiui.com/r/select.json"
  ],
  "files": [
    {
      "path": "registry/brook/blocks/kanban-board/components/kanban.tsx",
      "content": "\"use client\";\n\nimport {\n  type CollisionDetection,\n  closestCorners,\n  DndContext,\n  type DragEndEvent,\n  type DragOverEvent,\n  DragOverlay,\n  type DragStartEvent,\n  pointerWithin,\n  useDroppable,\n} from \"@dnd-kit/core\";\nimport { SortableContext, useSortable, verticalListSortingStrategy } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { Pencil, Trash2 } from \"lucide-react\";\nimport { createContext, useContext, useMemo } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { Card } from \"@/registry/brook/ui/card/card\";\nimport {\n  ContextMenu,\n  ContextMenuItem,\n  ContextMenuPopup,\n  ContextMenuPortal,\n  ContextMenuPositioner,\n  ContextMenuSeparator,\n  ContextMenuSpacer,\n  ContextMenuTrigger,\n} from \"@/registry/brook/ui/context-menu/context-menu\";\nimport { type KanbanColumnDataProps, type KanbanItemProps, useKanbanDnd } from \"../hooks/use-kanban-dnd\";\nimport { cn, getTasksForColumn } from \"../lib/project\";\nimport styles from \"./kanban.module.css\";\n\nconst kanbanCollisionDetection: CollisionDetection = (args) => {\n  const pointerCollisions = pointerWithin(args);\n  if (pointerCollisions.length > 0) {\n    return pointerCollisions;\n  }\n  return closestCorners(args);\n};\n\ntype KanbanContextValue<T extends KanbanItemProps = KanbanItemProps> = {\n  getItemsForColumn: (columnId: string) => T[];\n  onEditItem: (item: T) => void;\n  onDeleteItem: (item: T) => void;\n};\n\nconst KanbanContext = createContext<KanbanContextValue<KanbanItemProps> | null>(null);\n\nexport function useKanbanContext<T extends KanbanItemProps = KanbanItemProps>() {\n  const context = useContext(KanbanContext) as KanbanContextValue<T> | null;\n  if (!context) {\n    throw new Error(\"useKanbanContext must be used within a KanbanProvider\");\n  }\n  return context;\n}\n\nexport type KanbanProviderProps<\n  T extends KanbanItemProps = KanbanItemProps,\n  C extends KanbanColumnDataProps = KanbanColumnDataProps,\n> = {\n  children: (column: C) => React.ReactNode;\n  columns: C[];\n  data: T[];\n  className?: string;\n  onDataChange: (data: T[]) => void;\n  onDragStart?: (event: DragStartEvent) => void;\n  onDragEnd?: (event: DragEndEvent) => void;\n  onDragOver?: (event: DragOverEvent) => void;\n  onEditItem: (item: T) => void;\n  onDeleteItem: (item: T) => void;\n  renderOverlay?: (item: T) => React.ReactNode;\n};\n\nexport function KanbanProvider<\n  T extends KanbanItemProps = KanbanItemProps,\n  C extends KanbanColumnDataProps = KanbanColumnDataProps,\n>({\n  children,\n  columns,\n  data,\n  className,\n  onDataChange,\n  onDragStart,\n  onDragEnd,\n  onDragOver,\n  onEditItem,\n  onDeleteItem,\n  renderOverlay,\n}: KanbanProviderProps<T, C>) {\n  const { activeItem, sensors, announcements, handleDragStart, handleDragOver, handleDragEnd } = useKanbanDnd({\n    data,\n    columns,\n    enabled: true,\n    onDataChange,\n    onDragStart,\n    onDragEnd,\n    onDragOver,\n  });\n\n  const getItemsForColumn = useMemo(() => (columnId: string) => getTasksForColumn(data, columnId) as T[], [data]);\n\n  const contextValue = useMemo<KanbanContextValue<T>>(\n    () => ({\n      getItemsForColumn,\n      onEditItem,\n      onDeleteItem,\n    }),\n    [getItemsForColumn, onEditItem, onDeleteItem]\n  );\n\n  return (\n    <KanbanContext.Provider value={contextValue as KanbanContextValue<KanbanItemProps>}>\n      <DndContext\n        accessibility={{ announcements }}\n        collisionDetection={kanbanCollisionDetection}\n        id=\"kanban-dnd\"\n        onDragEnd={handleDragEnd}\n        onDragOver={handleDragOver}\n        onDragStart={handleDragStart}\n        sensors={sensors}\n      >\n        <div className={cn(styles.root, className)} data-slot=\"kanban-root\">\n          <div className={styles.board} data-slot=\"kanban-board\">\n            {columns.map((column) => children(column))}\n          </div>\n        </div>\n        {typeof window !== \"undefined\" &&\n          createPortal(\n            <DragOverlay>{activeItem && renderOverlay ? renderOverlay(activeItem as T) : null}</DragOverlay>,\n            document.body\n          )}\n      </DndContext>\n    </KanbanContext.Provider>\n  );\n}\n\nexport type KanbanColumnProps = React.ComponentProps<\"div\"> & {\n  id: string;\n};\n\nexport function KanbanColumn({ id, className, children, ...props }: KanbanColumnProps) {\n  const { setNodeRef } = useDroppable({ id });\n\n  return (\n    <div className={cn(styles.column, className)} data-slot=\"kanban-column\" ref={setNodeRef} {...props}>\n      {children}\n    </div>\n  );\n}\n\nexport type KanbanColumnHeaderProps = React.ComponentProps<\"div\">;\n\nexport function KanbanColumnHeader({ className, ...props }: KanbanColumnHeaderProps) {\n  return <div className={cn(styles.columnHeader, className)} data-slot=\"kanban-column-header\" {...props} />;\n}\n\nexport type KanbanCardListProps<T extends KanbanItemProps = KanbanItemProps> = Omit<\n  React.ComponentProps<\"div\">,\n  \"children\" | \"id\"\n> & {\n  id: string;\n  children: (item: T) => React.ReactNode;\n};\n\nexport function KanbanCardList<T extends KanbanItemProps = KanbanItemProps>({\n  id,\n  children,\n  className,\n  ...props\n}: KanbanCardListProps<T>) {\n  const { getItemsForColumn } = useKanbanContext<T>();\n  const items = getItemsForColumn(id);\n  const itemIds = items.map((item) => item.id);\n\n  return (\n    <SortableContext items={itemIds} strategy={verticalListSortingStrategy}>\n      <div className={cn(styles.columnContent, className)} data-slot=\"kanban-card-list\" {...props}>\n        {items.map(children)}\n      </div>\n    </SortableContext>\n  );\n}\n\nexport type KanbanCardProps<T extends KanbanItemProps = KanbanItemProps> = {\n  id: string;\n  item: T;\n  children: React.ReactNode;\n  isOverlay?: boolean;\n  className?: string;\n};\n\nexport function KanbanCard<T extends KanbanItemProps = KanbanItemProps>({\n  id,\n  item,\n  children,\n  isOverlay,\n  className,\n}: KanbanCardProps<T>) {\n  const { onEditItem, onDeleteItem } = useKanbanContext<T>();\n\n  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({\n    id,\n    disabled: isOverlay,\n  });\n\n  const style = {\n    transition,\n    transform: CSS.Transform.toString(transform),\n  };\n\n  const cardContent = (\n    <Card\n      className={cn(\n        styles.card,\n        isDragging === true && !isOverlay ? styles.cardDragging : null,\n        isOverlay === true ? styles.cardOverlay : null,\n        className\n      )}\n    >\n      {children}\n    </Card>\n  );\n\n  if (isOverlay) {\n    return cardContent;\n  }\n\n  return (\n    <div className={styles.cardWrapper} ref={setNodeRef} style={style} {...attributes} {...listeners}>\n      <ContextMenu>\n        <ContextMenuTrigger className={styles.cardTrigger}>{cardContent}</ContextMenuTrigger>\n        <ContextMenuPortal>\n          <ContextMenuPositioner>\n            <ContextMenuPopup>\n              <ContextMenuSpacer />\n              <ContextMenuItem icon={<Pencil size={14} />} onClick={() => onEditItem(item)}>\n                Edit\n              </ContextMenuItem>\n              <ContextMenuSeparator />\n              <ContextMenuItem icon={<Trash2 size={14} />} onClick={() => onDeleteItem(item)} variant=\"destructive\">\n                Delete\n              </ContextMenuItem>\n              <ContextMenuSpacer />\n            </ContextMenuPopup>\n          </ContextMenuPositioner>\n        </ContextMenuPortal>\n      </ContextMenu>\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/kanban.tsx"
    },
    {
      "path": "registry/brook/blocks/kanban-board/components/kanban.module.css",
      "content": "/* ==========================================================================\n   Root\n   ========================================================================== */\n\n.root {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n}\n\n/* ==========================================================================\n   Board Layout\n   ========================================================================== */\n\n.board {\n  display: flex;\n  flex: 1;\n  align-items: stretch;\n  gap: 1rem;\n  padding: 1rem;\n  min-height: 0;\n  overflow-x: auto;\n  overflow-y: hidden;\n}\n\n/* ==========================================================================\n   Column\n   ========================================================================== */\n\n.column {\n  display: flex;\n  flex-direction: column;\n  width: 320px;\n  flex-shrink: 0;\n  background-color: var(--col-background);\n  border-radius: var(--radius);\n}\n\n.columnHeader {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75rem 1rem;\n}\n\n.columnContent {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  padding: 0.5rem;\n  flex: 1;\n  min-height: 0;\n  overflow-y: auto;\n}\n\n/* ==========================================================================\n   Card\n   ========================================================================== */\n\n.card {\n  padding: 1rem;\n  cursor: grab;\n  transition:\n    box-shadow 0.15s ease,\n    border-color 0.15s ease;\n  touch-action: manipulation;\n  background-color: var(--background);\n}\n\n.card[data-slot=\"card\"] {\n  gap: 0.5rem;\n  padding: 1rem;\n  box-shadow: 0 0 0 1px oklch(from var(--border) l c h / 0.15);\n}\n\n.card:hover {\n  background-color: oklch(from var(--accent) l c h / 0.15);\n  box-shadow: var(--shadow-border-stack);\n}\n\n.cardDragging {\n  opacity: 0.5;\n  cursor: grabbing;\n}\n\n.cardOverlay {\n  cursor: grabbing;\n  box-shadow: var(--shadow-lg);\n}\n\n.card [data-slot=\"card-header\"] {\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n  gap: 0.5rem;\n  padding: 0;\n}\n\n.card [data-slot=\"card-title\"] {\n  font-size: 0.875rem;\n  font-weight: 500;\n  color: var(--foreground);\n  line-height: 1.4;\n}\n\n.card [data-slot=\"card-content\"] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  padding: 0;\n}\n\n.card [data-slot=\"card-description\"] {\n  font-size: 0.8125rem;\n  color: var(--muted-foreground);\n  line-height: 1.5;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n}\n\n.cardWrapper {\n  display: block;\n  position: relative;\n  border-radius: var(--radius);\n}\n\n.cardWrapper:focus-visible {\n  outline: none;\n  box-shadow:\n    0 0 0 2px var(--background),\n    0 0 0 4px var(--ring);\n}\n\n.cardTrigger {\n  display: block;\n}\n\n/* ==========================================================================\n   Project Board\n   ========================================================================== */\n\n.container {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-height: 0;\n}\n\n.loading {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100svh;\n  color: var(--muted-foreground);\n  font-size: 0.875rem;\n}\n\n.activeFilters {\n  padding: 0 1rem 0.5rem;\n}\n\n.columnHeaderLeft {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.columnIcon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--muted-foreground);\n}\n\n.columnTitle {\n  font-size: 0.875rem;\n  font-weight: 600;\n  margin: 0;\n}\n\n/* Card Meta */\n.cardMeta {\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  padding-top: 0.5rem;\n}\n\n.cardTags {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.25rem;\n}\n\n.tagDot {\n  width: 6px;\n  height: 6px;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n/* Card Footer */\n.cardFooterWrapper {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  margin-bottom: -0.25rem;\n}\n\n.cardDividerWrapper {\n  padding-top: 0.5rem;\n  padding-bottom: 0.5rem;\n  margin-left: -1rem;\n  margin-right: -1rem;\n}\n\n.cardDivider {\n  height: 1px;\n  background-color: oklch(from var(--border) l c h / 0.2);\n}\n\n.cardFooter {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n  padding: 0;\n}\n\n.footerLeft {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.footerIcon[data-slot=\"button\"] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n  padding: 4px 8px;\n  height: auto;\n  border: 0.5px solid oklch(from var(--border) l c h / 0.4);\n  border-radius: calc(var(--radius) - 2px);\n  color: var(--muted-foreground);\n  transition: all 0.15s;\n}\n\n.footerIcon[data-slot=\"button\"]:hover {\n  background-color: var(--mix-card-50-bg);\n  color: var(--foreground);\n}\n\n.footerIconCount {\n  font-size: 0.6875rem;\n  font-weight: 500;\n  line-height: 1;\n}\n\n.footerIcon[data-slot=\"button\"][data-urgent=\"true\"] .footerIconCount {\n  color: var(--warning);\n}\n\n.footerIcon[data-slot=\"button\"][data-overdue=\"true\"] .footerIconCount {\n  color: var(--destructive);\n}\n\n/* Avatar Group */\n.avatarGroup[data-slot=\"button\"] {\n  display: flex;\n  align-items: center;\n  height: auto;\n  padding: 0;\n  background: transparent;\n  border: none;\n}\n\n.avatarGroup[data-slot=\"button\"]:hover {\n  background: transparent;\n}\n\n.avatarWrapper {\n  margin-left: -0.5rem;\n}\n\n.avatarWrapper:first-child {\n  margin-left: 0;\n}\n\n.avatar[data-slot=\"avatar-root\"] {\n  width: 1.5rem;\n  height: 1.5rem;\n  border: 0.5px solid oklch(from var(--border) l c h / 0.1);\n  font-size: 0.5rem;\n}\n\n.avatarOverflow {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.5rem;\n  height: 1.5rem;\n  margin-left: -0.5rem;\n  border-radius: 50%;\n  background-color: var(--muted);\n  border: 0.5px solid oklch(from var(--border) l c h / 0.2);\n  font-size: 0.5rem;\n  font-weight: 500;\n  color: var(--muted-foreground);\n}\n\n.avatarPlaceholderAdd {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.5rem;\n  height: 1.5rem;\n  border-radius: 50%;\n  border: 1px dashed oklch(from var(--border) l c h / 0.4);\n  color: var(--muted-foreground);\n  cursor: pointer;\n  transition: all 0.15s;\n}\n\n.avatarPlaceholderAdd:hover {\n  border-color: oklch(from var(--border) l c h / 0.6);\n  color: var(--foreground);\n}\n\n.avatarPlaceholderUser {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.5rem;\n  height: 1.5rem;\n  margin-left: -0.5rem;\n  border-radius: 50%;\n  background-color: var(--mix-card-33-bg);\n  border: 0.5px solid oklch(from var(--border) l c h / 0.2);\n  color: var(--muted-foreground);\n}\n\n/* ==========================================================================\n   Filter Bar\n   ========================================================================== */\n\n.filterContainer {\n  display: flex;\n  flex-direction: column;\n  gap: 0.5rem;\n  padding: 0.75rem 1rem;\n}\n\n.filterBar {\n  display: flex;\n  gap: 0.5rem;\n  align-items: center;\n}\n\n.filterPills {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 0.5rem;\n}\n\n.filterPill {\n  display: flex;\n  gap: 0.25rem;\n  align-items: center;\n}\n\n.filterPillRemove {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0;\n  border: none;\n  background: none;\n  border-radius: 50%;\n  cursor: pointer;\n  opacity: 0.7;\n  transition: opacity 0.15s;\n}\n\n.filterPillRemove:hover {\n  opacity: 1;\n}\n\n/* ==========================================================================\n   Priority Icon\n   ========================================================================== */\n\n.priorityIcon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 1.5rem;\n  height: 1.5rem;\n  background-color: transparent;\n  border: 1px solid var(--border-subtle-light);\n  border-radius: calc(var(--radius) - 2px);\n  flex-shrink: 0;\n}\n\n.priorityBars {\n  color: var(--muted-foreground);\n}\n\n.priorityInactive {\n  fill: oklch(from var(--muted-foreground) l c h / 0.3);\n}\n\n.priorityUrgent {\n  color: var(--urgent);\n}\n\n/* ==========================================================================\n   Task Dialog\n   ========================================================================== */\n\n.dialogPopup {\n  max-width: 660px;\n  overflow: visible;\n  padding: 1.25rem;\n  transition: all 150ms ease;\n  transform: translate(-50%, -50%)\n    scale(calc(1 - 0.03 * var(--nested-dialogs, 0)));\n}\n\n.dialogPopup[data-nested-dialog-open] {\n  opacity: 0.5;\n}\n\n.dialogPopup[data-nested-dialog-open]::after {\n  content: \"\";\n  position: absolute;\n  inset: 0;\n  border-radius: inherit;\n  background-color: oklch(from var(--background) l c h / 0.3);\n}\n\n.taskForm[data-slot=\"form\"] {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  margin-top: 0;\n}\n\n.titleInput {\n  font-size: 1.25rem;\n  font-weight: 600;\n  line-height: 1.3;\n  border-radius: 0;\n  padding-block: 0.5rem;\n  letter-spacing: -0.01em;\n}\n\n.titleInput::placeholder {\n  font-size: 1.25rem;\n  font-weight: 600;\n  color: var(--muted-foreground);\n  opacity: 0.6;\n}\n\n.fieldError {\n  font-size: 0.75rem;\n  color: var(--destructive);\n  margin: 0;\n}\n\n.descriptionInput {\n  font-size: 0.875rem;\n  color: var(--muted-foreground);\n  border-radius: 0;\n  padding-block: 0.375rem;\n  min-height: 2.5rem;\n}\n\n.descriptionInput::placeholder {\n  font-size: 0.875rem;\n  opacity: 0.7;\n}\n\n.subtasksSection {\n  display: flex;\n  flex-direction: column;\n  gap: 0.25rem;\n  margin-top: 0.75rem;\n}\n\n.subtaskItem {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.25rem 0;\n  border-radius: var(--radius-sm);\n}\n\n.subtaskCheckbox[data-slot=\"checkbox-root\"] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 16px;\n  height: 16px;\n  padding: 0;\n  border: 1.5px solid var(--muted-foreground);\n  border-radius: 4px;\n  background: transparent;\n  color: var(--muted-foreground);\n  cursor: pointer;\n  flex-shrink: 0;\n  transition:\n    border-color 150ms ease,\n    background-color 150ms ease,\n    color 150ms ease;\n}\n\n.subtaskCheckbox[data-slot=\"checkbox-root\"]:hover {\n  border-color: var(--foreground);\n}\n\n.subtaskCheckbox[data-slot=\"checkbox-root\"][data-checked] {\n  background-color: var(--primary);\n  border-color: var(--primary);\n  color: var(--primary-foreground);\n}\n\n.subtaskCheckbox [data-slot=\"checkbox-indicator\"] {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.subtaskInput {\n  flex: 1;\n  border: none;\n  background: transparent;\n  font-size: 0.875rem;\n  color: var(--foreground);\n  outline: none;\n  padding: 0.25rem 0;\n}\n\n.subtaskInput::placeholder {\n  color: var(--muted-foreground);\n  opacity: 0.6;\n}\n\n.subtaskInput[data-completed=\"true\"] {\n  text-decoration: line-through;\n  color: var(--muted-foreground);\n}\n\n.subtaskInput[data-error=\"true\"] {\n  color: var(--destructive);\n}\n\n.subtaskInput[data-error=\"true\"]::placeholder {\n  color: var(--destructive);\n  opacity: 0.8;\n}\n\n.subtaskItemWrapper {\n  display: flex;\n  flex-direction: column;\n}\n\n.subtaskError {\n  font-size: 0.75rem;\n  color: var(--destructive);\n  margin-left: 1.75rem;\n  margin-top: 0.125rem;\n}\n\n.subtaskRemove {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding: 0.25rem;\n  border: none;\n  background: transparent;\n  color: var(--muted-foreground);\n  cursor: pointer;\n  opacity: 0;\n  transition:\n    opacity 150ms ease,\n    color 150ms ease;\n  border-radius: var(--radius-sm);\n}\n\n.subtaskItem:hover .subtaskRemove {\n  opacity: 1;\n}\n\n.subtaskRemove:hover {\n  color: var(--destructive);\n}\n\n.addSubtaskButton {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  padding: 0.375rem 0;\n  border: none;\n  background: transparent;\n  color: var(--muted-foreground);\n  font-size: 0.875rem;\n  cursor: pointer;\n  transition: color 150ms ease;\n}\n\n.addSubtaskButton:hover {\n  color: var(--foreground);\n}\n\n.addSubtaskButton [data-slot=\"kbd\"] {\n  margin-left: auto;\n}\n\n.calendar[data-slot=\"calendar\"] {\n  padding: 0;\n}\n\n.calendarPopup[data-slot=\"popover-popup\"] {\n  border-radius: var(--radius);\n}\n\n/* Calendar popover needs higher z-index to appear above dialog */\n:global(body:has([data-kanban-dialog]) [data-slot=\"popover-positioner\"]) {\n  z-index: 200;\n}\n\n.fieldRow {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  gap: 0.5rem;\n  margin-top: 1rem;\n}\n\n.fieldButton {\n  display: inline-flex;\n  align-items: center;\n  gap: 0.5rem;\n  white-space: nowrap;\n}\n\n/* Highlight triggers on hover and when popup is open */\n.fieldRow [data-slot=\"select-trigger\"]:hover,\n.fieldRow [data-slot=\"popover-trigger\"]:hover,\n.fieldRow [data-slot=\"button\"]:hover,\n.fieldRow [data-slot=\"select-trigger\"][data-popup-open],\n.fieldRow [data-slot=\"popover-trigger\"][data-popup-open],\n.fieldRow [data-slot=\"combobox-trigger\"][data-popup-open],\n.fieldRow [data-popup-open] {\n  background-color: var(--accent);\n}\n\n.fieldButton [data-slot=\"select-value\"] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.fieldPlaceholder {\n  color: var(--muted-foreground);\n}\n\n.fieldIcon {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: var(--muted-foreground);\n}\n\n.fieldIcon[data-urgent=\"true\"] {\n  color: var(--urgent);\n}\n\n.tagChips {\n  display: flex;\n  align-items: center;\n}\n\n.tagChip {\n  width: 8px;\n  height: 8px;\n  border-radius: 50%;\n  flex-shrink: 0;\n}\n\n.tagChips .tagChip:not(:first-child) {\n  margin-left: -3px;\n}\n\n.tagItemContent {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n.selectTrigger {\n  width: 100%;\n  justify-content: space-between;\n}\n\n.assigneesPopup {\n  min-width: 200px;\n\n  & [data-slot=\"combobox-input\"] {\n    margin-bottom: 4px;\n    padding-inline: 12px 10px;\n    width: 100%;\n    min-height: 32px;\n    font-size: 12px;\n    border: none;\n    border-bottom: 0.5px solid oklch(from var(--border) l c h / 0.8);\n    border-radius: 0;\n    background: transparent;\n\n    &:focus {\n      outline: none;\n      box-shadow: none;\n    }\n  }\n}\n\n.dialogFooter {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.5rem;\n  margin-top: 1.5rem;\n  padding-top: 1rem;\n  border-top: 0.5px solid oklch(from var(--border) l c h / 0.4);\n  margin-inline: -1.25rem;\n  padding-inline: 1.25rem;\n}\n\n.footerActions {\n  display: flex;\n  align-items: center;\n  gap: 0.375rem;\n  margin-left: auto;\n}\n\n.deleteButton[data-slot=\"button\"] {\n  color: var(--muted-foreground);\n}\n\n.deleteButton[data-slot=\"button\"]:hover {\n  color: var(--destructive-foreground);\n  background-color: var(--destructive);\n  border-color: var(--destructive);\n}\n\n.closeButton {\n  position: absolute;\n  right: 0.75rem;\n  top: 0.75rem;\n  opacity: 0.5;\n  transition: opacity 150ms ease;\n}\n\n.closeButton:hover {\n  opacity: 1;\n}\n\n/* Input borderless variant overrides */\n.titleInput[data-variant=\"borderless\"],\n.descriptionInput[data-variant=\"borderless\"] {\n  border: none;\n  background-color: transparent;\n  padding: 0;\n  height: auto;\n  box-shadow: none;\n}\n\n.titleInput[data-variant=\"borderless\"]:focus,\n.titleInput[data-variant=\"borderless\"]:focus-visible,\n.descriptionInput[data-variant=\"borderless\"]:focus,\n.descriptionInput[data-variant=\"borderless\"]:focus-visible {\n  outline: none;\n  border-color: transparent;\n  box-shadow: none;\n}\n\n/* Trigger overrides */\n.fieldRow [data-slot=\"select-trigger\"],\n.fieldRow [data-slot=\"popover-trigger\"],\n.fieldRow [data-slot=\"button\"] {\n  box-shadow: 0 0 0 1px oklch(from var(--border) l c h / 0.4);\n}\n\n/* Select popup overrides */\n.fieldRow [data-slot=\"select-popup\"] {\n  min-width: 0;\n  width: 200px;\n  border: 0.5px solid oklch(from var(--border) l c h / 0.4);\n  box-shadow: var(--shadow-border-stack);\n  transition:\n    transform 250ms var(--ease-out-expo),\n    opacity 250ms var(--ease-out-expo);\n}\n\n.priorityPositioner {\n  min-width: 140px;\n}\n\n.columnPositioner {\n  min-width: 160px;\n}\n\n.tagsPositioner {\n  min-width: 130px;\n}\n\n.fieldRow [data-slot=\"select-popup\"][data-starting-style],\n.fieldRow [data-slot=\"select-popup\"][data-ending-style] {\n  opacity: 0;\n  transform: scale(0.95);\n}\n\n/* Select value overrides */\n.fieldRow [data-slot=\"select-value\"] {\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n}\n\n/* Select list overrides */\n.fieldRow [data-slot=\"select-list\"] {\n  padding: 0;\n  scroll-padding-block: 1.5rem;\n}\n\n/* Select item overrides */\n.fieldRow [data-slot=\"select-item\"] {\n  gap: 0.75rem;\n  padding-inline: 8px 6px;\n  margin-inline: 4px;\n  min-height: 32px;\n}\n\n/* Select indicator overrides */\n.fieldRow [data-slot=\"select-item-indicator\"] {\n  color: var(--muted-foreground);\n}\n\n/* Combobox overrides */\n.fieldRow [data-slot=\"combobox-popup\"] {\n  min-width: 200px;\n  border: 0.5px solid oklch(from var(--border) l c h / 0.4);\n  box-shadow: var(--shadow-border-stack);\n}\n\n.srOnly {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.inlineField[data-slot=\"field\"] {\n  display: contents;\n}\n\n/* ==========================================================================\n   Delete Dialog\n   ========================================================================== */\n\n.deleteIconWrapper {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 64px;\n  height: 64px;\n  margin: 0 auto 0.75rem;\n  border-radius: var(--radius);\n  background-color: oklch(from var(--destructive) l c h / 0.15);\n}\n\n.deleteIcon {\n  color: var(--destructive);\n}\n\n.deleteDialog[data-slot=\"alert-dialog-popup\"] {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: 400px;\n  width: auto;\n  gap: 0.5rem;\n}\n\n.deleteDialog [data-slot=\"alert-dialog-title\"] {\n  font-size: 1rem;\n  font-weight: 500;\n  text-align: center;\n}\n\n.deleteDialog [data-slot=\"alert-dialog-description\"] {\n  font-size: 1rem;\n  text-align: center;\n}\n\n.deleteDialog [data-slot=\"alert-dialog-footer\"] {\n  display: flex;\n  flex-direction: row;\n  gap: 0.75rem;\n  margin-top: 1rem;\n  width: 100%;\n}\n\n.deleteDialog [data-slot=\"alert-dialog-footer\"] > * {\n  flex: 1;\n}\n\n/* ==========================================================================\n   Spinner\n   ========================================================================== */\n\n.spinner {\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/kanban.module.css"
    },
    {
      "path": "registry/brook/blocks/kanban-board/components/project-board.tsx",
      "content": "\"use client\";\n\nimport {\n  Calendar,\n  CheckCircle2,\n  Circle,\n  CircleDashed,\n  CircleDot,\n  ListTodo,\n  MessageCircleMore,\n  Plus,\n  User,\n} from \"lucide-react\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/registry/brook/ui/avatar/avatar\";\nimport { Badge } from \"@/registry/brook/ui/badge/badge\";\nimport { Button } from \"@/registry/brook/ui/button/button\";\nimport { CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/registry/brook/ui/card/card\";\nimport { capitalize, TAG_COLORS, type Tag } from \"../lib/project\";\nimport type { FilterConfig, GroupByField, KanbanData, Priority, Task } from \"../types\";\nimport { DeleteDialog } from \"./delete-dialog\";\nimport { ActiveFilters, FilterBar } from \"./filter-bar\";\nimport { KanbanCard, KanbanCardList, KanbanColumn, KanbanColumnHeader, KanbanProvider } from \"./kanban\";\nimport { PriorityIcon } from \"./priority-icon\";\nimport styles from \"./kanban.module.css\";\nimport { TaskDialog } from \"./task-dialog\";\n\nexport type ProjectBoardProps = {\n  data: KanbanData;\n};\n\nconst COLUMN_ICONS: Record<string, React.ReactNode> = {\n  backlog: <CircleDashed size={14} />,\n  todo: <Circle size={14} />,\n  \"in-progress\": <CircleDot size={14} />,\n  done: <CheckCircle2 size={14} />,\n};\n\nfunction getDaysLeft(dueDate: string | undefined, now: Date | null): number | null {\n  if (!(dueDate && now)) {\n    return null;\n  }\n  const due = new Date(dueDate);\n  const today = new Date(now);\n  today.setHours(0, 0, 0, 0);\n  due.setHours(0, 0, 0, 0);\n  const diffTime = due.getTime() - today.getTime();\n  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n}\n\nfunction useCurrentDate() {\n  const [now, setNow] = useState<Date | null>(null);\n  useEffect(() => {\n    setNow(new Date());\n  }, []);\n  return now;\n}\n\nfunction TaskCardContent({ task, onEdit }: { task: Task; onEdit?: (task: Task) => void }) {\n  const now = useCurrentDate();\n  const subtaskCount = task.subtasks?.length ?? 0;\n  const completedSubtasks = task.subtasks?.filter((st) => st.completed).length ?? 0;\n  const daysLeft = getDaysLeft(task.dueDate, now);\n\n  const renderAssignees = () => {\n    if (!task.assignees) {\n      return null;\n    }\n\n    if (task.assignees.length > 0) {\n      return (\n        <Button\n          aria-label=\"Edit assignees\"\n          className={styles.avatarGroup}\n          onClick={() => onEdit?.(task)}\n          variant=\"ghost\"\n        >\n          {task.assignees.slice(0, 3).map((user) => (\n            <div className={styles.avatarWrapper} key={user.id}>\n              <Avatar className={styles.avatar}>\n                <AvatarImage alt={user.name} src={user.avatar} />\n                <AvatarFallback>\n                  {user.name\n                    .split(\" \")\n                    .map((n) => n[0])\n                    .join(\"\")}\n                </AvatarFallback>\n              </Avatar>\n            </div>\n          ))}\n          {task.assignees.length > 3 && <div className={styles.avatarOverflow}>+{task.assignees.length - 3}</div>}\n        </Button>\n      );\n    }\n\n    return (\n      <Button aria-label=\"Add assignees\" className={styles.avatarGroup} onClick={() => onEdit?.(task)} variant=\"ghost\">\n        <div className={styles.avatarPlaceholderAdd}>\n          <Plus aria-hidden=\"true\" size={8} />\n        </div>\n        <div className={styles.avatarPlaceholderUser}>\n          <User aria-hidden=\"true\" size={10} />\n        </div>\n      </Button>\n    );\n  };\n\n  return (\n    <>\n      <CardHeader>\n        <CardTitle>{task.title}</CardTitle>\n      </CardHeader>\n      <CardContent>\n        {task.description ? <CardDescription>{task.description}</CardDescription> : null}\n        <div className={styles.cardMeta} onPointerDown={(e) => e.stopPropagation()}>\n          <PriorityIcon priority={task.priority} />\n          {task.tags.length > 0 && (\n            <div className={styles.cardTags}>\n              {task.tags.map((tag) => (\n                <Badge key={tag} size=\"sm\" variant=\"outline\">\n                  <span className={styles.tagDot} style={{ backgroundColor: TAG_COLORS[tag as Tag] }} />\n                  {capitalize(tag)}\n                </Badge>\n              ))}\n            </div>\n          )}\n        </div>\n      </CardContent>\n      <div className={styles.cardFooterWrapper} onPointerDown={(e) => e.stopPropagation()}>\n        <div className={styles.cardDividerWrapper}>\n          <div className={styles.cardDivider} />\n        </div>\n        <CardFooter className={styles.cardFooter}>\n          <div className={styles.footerLeft}>\n            {renderAssignees()}\n            <Button aria-label=\"Comments\" className={styles.footerIcon} onClick={() => onEdit?.(task)} variant=\"ghost\">\n              <MessageCircleMore aria-hidden=\"true\" size={12} />\n            </Button>\n            {subtaskCount > 0 && (\n              <Button\n                aria-label={`${completedSubtasks} of ${subtaskCount} subtasks completed`}\n                className={styles.footerIcon}\n                onClick={() => onEdit?.(task)}\n                variant=\"ghost\"\n              >\n                <ListTodo aria-hidden=\"true\" size={12} />\n                <span className={styles.footerIconCount}>\n                  {completedSubtasks}/{subtaskCount}\n                </span>\n              </Button>\n            )}\n          </div>\n          {daysLeft !== null && (\n            <Button\n              aria-label={`${daysLeft} days left`}\n              className={styles.footerIcon}\n              data-overdue={daysLeft < 0}\n              data-urgent={daysLeft >= 0 && daysLeft <= 2}\n              onClick={() => onEdit?.(task)}\n              variant=\"ghost\"\n            >\n              <Calendar aria-hidden=\"true\" size={12} />\n              <span className={styles.footerIconCount}>{daysLeft}</span>\n            </Button>\n          )}\n        </CardFooter>\n      </div>\n    </>\n  );\n}\n\nconst DEFAULT_FILTERS: FilterConfig = { priority: [], tags: [] };\n\ntype DialogState =\n  | { mode: \"closed\" }\n  | { mode: \"create\"; columnId: string }\n  | { mode: \"edit\"; task: Task }\n  | { mode: \"delete\"; task: Task };\n\nexport function ProjectBoard({ data }: ProjectBoardProps) {\n  const [tasks, setTasks] = useState<Task[]>(data.tasks);\n  const [filters, setFilters] = useState<FilterConfig>(DEFAULT_FILTERS);\n\n  const togglePriority = useCallback((priority: Priority, checked: boolean) => {\n    setFilters((prev) => ({\n      ...prev,\n      priority: checked ? [...prev.priority, priority] : prev.priority.filter((p) => p !== priority),\n    }));\n  }, []);\n\n  const toggleTag = useCallback((tag: string, checked: boolean) => {\n    setFilters((prev) => ({\n      ...prev,\n      tags: checked ? [...prev.tags, tag] : prev.tags.filter((t) => t !== tag),\n    }));\n  }, []);\n\n  const activeFilterCount = filters.priority.length + filters.tags.length;\n  const [groupBy, setGroupBy] = useState<GroupByField>(\"column\");\n  const [dialogState, setDialogState] = useState<DialogState>({ mode: \"closed\" });\n\n  const openCreate = useCallback((columnId: string) => {\n    setDialogState({ mode: \"create\", columnId });\n  }, []);\n\n  const openEdit = useCallback((task: Task) => {\n    setDialogState({ mode: \"edit\", task });\n  }, []);\n\n  const openDelete = useCallback((task: Task) => {\n    setDialogState({ mode: \"delete\", task });\n  }, []);\n\n  const closeDialog = useCallback(() => {\n    setDialogState({ mode: \"closed\" });\n  }, []);\n\n  return (\n    <div className={styles.container}>\n      <FilterBar\n        filters={filters}\n        groupBy={groupBy}\n        onGroupByChange={setGroupBy}\n        onTogglePriority={togglePriority}\n        onToggleTag={toggleTag}\n      />\n\n      {activeFilterCount > 0 && (\n        <div className={styles.activeFilters}>\n          <ActiveFilters\n            filters={filters}\n            onRemovePriority={(p) => togglePriority(p, false)}\n            onRemoveTag={(t) => toggleTag(t, false)}\n          />\n        </div>\n      )}\n\n      <KanbanProvider\n        columns={data.columns}\n        data={tasks}\n        onDataChange={setTasks}\n        onDeleteItem={openDelete}\n        onEditItem={openEdit}\n        renderOverlay={(task) => (\n          <KanbanCard id={task.id} isOverlay item={task}>\n            <TaskCardContent task={task} />\n          </KanbanCard>\n        )}\n      >\n        {(column) => (\n          <KanbanColumn id={column.id} key={column.id}>\n            <KanbanColumnHeader className={styles.columnHeader}>\n              <div className={styles.columnHeaderLeft}>\n                {COLUMN_ICONS[column.id] ? <span className={styles.columnIcon}>{COLUMN_ICONS[column.id]}</span> : null}\n                <h2 className={styles.columnTitle}>{column.name}</h2>\n              </div>\n              <Button\n                aria-label={`Add task to ${column.name}`}\n                onClick={() => openCreate(column.id)}\n                size=\"icon\"\n                variant=\"ghost\"\n              >\n                <Plus size={16} />\n              </Button>\n            </KanbanColumnHeader>\n\n            <KanbanCardList<Task> id={column.id}>\n              {(task) => (\n                <KanbanCard id={task.id} item={task} key={task.id}>\n                  <TaskCardContent onEdit={openEdit} task={task} />\n                </KanbanCard>\n              )}\n            </KanbanCardList>\n          </KanbanColumn>\n        )}\n      </KanbanProvider>\n\n      <TaskDialog\n        assignees={data.teamMembers}\n        columnId={dialogState.mode === \"create\" ? dialogState.columnId : undefined}\n        columns={data.columns}\n        groupBy={groupBy}\n        mode={dialogState.mode === \"create\" ? \"create\" : \"edit\"}\n        onClose={closeDialog}\n        open={dialogState.mode === \"create\" || dialogState.mode === \"edit\"}\n        task={dialogState.mode === \"edit\" ? dialogState.task : undefined}\n      />\n\n      <DeleteDialog onOpenChange={(open) => !open && closeDialog()} open={dialogState.mode === \"delete\"} />\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/project-board.tsx"
    },
    {
      "path": "registry/brook/blocks/kanban-board/components/task-dialog.tsx",
      "content": "\"use client\";\n\nimport { AlertDialog } from \"@base-ui/react/alert-dialog\";\nimport { Combobox as ComboboxPrimitive } from \"@base-ui/react/combobox\";\nimport {\n  Calendar as CalendarIcon,\n  Check,\n  CheckCircle2,\n  Circle,\n  CircleAlert,\n  CircleDashed,\n  CircleDot,\n  Command,\n  Loader2,\n  Plus,\n  Tag as TagIcon,\n  Trash2,\n  Users,\n  X,\n} from \"lucide-react\";\nimport { useActionState, useCallback, useEffect, useId, useState } from \"react\";\nimport {\n  AlertDialogClose,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogPopup,\n  AlertDialogTitle,\n} from \"@/registry/brook/ui/alert-dialog/alert-dialog\";\nimport { Button } from \"@/registry/brook/ui/button/button\";\nimport { Calendar } from \"@/registry/brook/ui/calendar/calendar\";\nimport { Checkbox, CheckboxIndicator } from \"@/registry/brook/ui/checkbox/checkbox\";\nimport { CheckboxGroup } from \"@/registry/brook/ui/checkbox-group/checkbox-group\";\nimport {\n  Combobox,\n  ComboboxEmpty,\n  ComboboxInput,\n  ComboboxItem,\n  ComboboxList,\n  ComboboxPopup,\n  ComboboxPortal,\n  ComboboxPositioner,\n} from \"@/registry/brook/ui/combobox/combobox\";\nimport { Dialog, DialogClose, DialogOverlay, DialogPopup, DialogPortal } from \"@/registry/brook/ui/dialog/dialog\";\nimport { Input } from \"@/registry/brook/ui/input/input\";\nimport { Kbd } from \"@/registry/brook/ui/kbd/kbd\";\nimport { Popover, PopoverPopup, PopoverTrigger } from \"@/registry/brook/ui/popover/popover\";\nimport {\n  Select,\n  SelectItem,\n  SelectItemIndicator,\n  SelectItemText,\n  SelectList,\n  SelectPopup,\n  SelectPortal,\n  SelectPositioner,\n  SelectSpacer,\n  SelectTrigger,\n  SelectValue,\n} from \"@/registry/brook/ui/select/select\";\nimport { formatDateString, parseDateString, PRIORITY_ITEMS, TAG_COLORS, TAG_ITEMS, type Tag } from \"../lib/project\";\nimport type { Assignee, Column, GroupByField, Priority, Subtask } from \"../types\";\nimport styles from \"./kanban.module.css\";\n\nconst PRIORITY_CONFIG: Record<Priority, { icon: React.ReactNode; label: string }> = {\n  urgent: { icon: <CircleAlert size={14} />, label: \"Urgent\" },\n  high: { icon: <PriorityBars count={3} />, label: \"High\" },\n  medium: { icon: <PriorityBars count={2} />, label: \"Medium\" },\n  low: { icon: <PriorityBars count={1} />, label: \"Low\" },\n};\n\nconst COLUMN_ICONS: Record<string, React.ReactNode> = {\n  backlog: <CircleDashed size={14} />,\n  todo: <Circle size={14} />,\n  \"in-progress\": <CircleDot size={14} />,\n  done: <CheckCircle2 size={14} />,\n};\n\nfunction PriorityBars({ count }: { count: number }) {\n  return (\n    <svg fill=\"currentColor\" height=\"14\" viewBox=\"0 0 14 14\" width=\"14\">\n      <rect height=\"4\" rx=\"1\" width=\"3\" x=\"1\" y=\"9\" />\n      <rect height=\"7\" opacity={count >= 2 ? 1 : 0.3} rx=\"1\" width=\"3\" x=\"5.5\" y=\"6\" />\n      <rect height=\"10\" opacity={count >= 3 ? 1 : 0.3} rx=\"1\" width=\"3\" x=\"10\" y=\"3\" />\n    </svg>\n  );\n}\n\nfunction TagDot({ tag }: { tag: Tag }) {\n  return <span className={styles.tagChip} style={{ backgroundColor: TAG_COLORS[tag] }} />;\n}\n\ntype FormState =\n  | { status: \"idle\" }\n  | { status: \"submitting\" }\n  | { status: \"error\"; message: string }\n  | { status: \"success\" };\n\nconst initialFormState: FormState = { status: \"idle\" };\n\nasync function submitTaskAction(_prevState: FormState, formData: FormData): Promise<FormState> {\n  await new Promise((resolve) => setTimeout(resolve, 100));\n\n  const title = formData.get(\"title\") as string;\n  if (!title?.trim()) {\n    return { status: \"error\", message: \"Title is required\" };\n  }\n\n  return { status: \"success\" };\n}\n\ntype SubtaskSectionProps = {\n  subtasks: Subtask[];\n  onAddSubtask: () => void;\n  onUpdateSubtask: (id: string, updates: Partial<Subtask>) => void;\n  onRemoveSubtask: (id: string) => void;\n};\n\nfunction SubtaskSection({ subtasks, onAddSubtask, onUpdateSubtask, onRemoveSubtask }: SubtaskSectionProps) {\n  const labelId = useId();\n\n  const handleValueChange = (newValue: string[]) => {\n    const newSet = new Set(newValue);\n    for (const subtask of subtasks) {\n      const shouldBeCompleted = newSet.has(subtask.id);\n      if (subtask.completed !== shouldBeCompleted) {\n        onUpdateSubtask(subtask.id, { completed: shouldBeCompleted });\n      }\n    }\n  };\n\n  return (\n    <div className={styles.subtasksSection}>\n      <span className={styles.srOnly} id={labelId}>\n        Subtasks\n      </span>\n      <CheckboxGroup\n        allValues={subtasks.map((s) => s.id)}\n        aria-labelledby={labelId}\n        onValueChange={handleValueChange}\n        value={subtasks.filter((s) => s.completed).map((s) => s.id)}\n      >\n        {subtasks.map((subtask) => (\n          <div className={styles.subtaskItem} key={subtask.id}>\n            <Checkbox className={styles.subtaskCheckbox} name={`subtask-${subtask.id}`} value={subtask.id}>\n              <CheckboxIndicator>\n                <Check aria-hidden=\"true\" size={12} strokeWidth={3} />\n              </CheckboxIndicator>\n            </Checkbox>\n            <input\n              autoFocus={!subtask.title}\n              className={styles.subtaskInput}\n              data-completed={subtask.completed}\n              name={`subtask-title-${subtask.id}`}\n              onChange={(e) => onUpdateSubtask(subtask.id, { title: e.target.value })}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") {\n                  e.preventDefault();\n                  onAddSubtask();\n                }\n                if (e.key === \"Backspace\" && !subtask.title) {\n                  e.preventDefault();\n                  onRemoveSubtask(subtask.id);\n                }\n              }}\n              placeholder=\"Subtask title...\"\n              value={subtask.title}\n            />\n            <button\n              aria-label=\"Remove subtask\"\n              className={styles.subtaskRemove}\n              onClick={() => onRemoveSubtask(subtask.id)}\n              type=\"button\"\n            >\n              <X aria-hidden=\"true\" size={14} />\n            </button>\n          </div>\n        ))}\n      </CheckboxGroup>\n      <button className={styles.addSubtaskButton} onClick={onAddSubtask} type=\"button\">\n        <Plus aria-hidden=\"true\" size={14} />\n        <span>Add subtask</span>\n        <Kbd size=\"sm\">\n          <Command aria-hidden=\"true\" size={10} />L\n        </Kbd>\n      </button>\n    </div>\n  );\n}\n\nexport type TaskDialogProps = {\n  open: boolean;\n  mode: \"create\" | \"edit\";\n  task?: {\n    title: string;\n    description: string;\n    priority: Priority;\n    columnId: string;\n    tags: string[];\n    assignees?: Assignee[];\n    subtasks?: Subtask[];\n    dueDate?: string;\n  };\n  columnId?: string;\n  assignees: Assignee[];\n  columns: Column[];\n  groupBy: GroupByField;\n  onClose: () => void;\n};\n\nexport function TaskDialog({ open, mode, task, columnId, assignees, columns, groupBy, onClose }: TaskDialogProps) {\n  const [formState, submitAction, isPending] = useActionState(submitTaskAction, initialFormState);\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n  const [subtasks, setSubtasks] = useState<Subtask[]>(task?.subtasks ?? []);\n  const [dueDate, setDueDate] = useState(task?.dueDate ? task.dueDate.split(\"T\")[0] : \"\");\n\n  const defaultColumnId = columns[0]?.id ?? \"\";\n  const defaultPriority = task?.priority ?? \"medium\";\n  const defaultSelectedColumnId = task?.columnId ?? columnId ?? defaultColumnId;\n  const defaultTags = task?.tags ?? [];\n  const defaultAssignees = task?.assignees ?? [];\n\n  const addSubtask = useCallback(() => {\n    const newSubtask: Subtask = {\n      id: `subtask-${crypto.randomUUID()}`,\n      title: \"\",\n      completed: false,\n    };\n    setSubtasks((prev) => [...prev, newSubtask]);\n  }, []);\n\n  const updateSubtask = useCallback((id: string, updates: Partial<Subtask>) => {\n    setSubtasks((prev) => prev.map((st) => (st.id === id ? { ...st, ...updates } : st)));\n  }, []);\n\n  const removeSubtask = useCallback((id: string) => {\n    setSubtasks((prev) => prev.filter((st) => st.id !== id));\n  }, []);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === \"l\") {\n        e.preventDefault();\n        addSubtask();\n      }\n    },\n    [addSubtask]\n  );\n\n  useEffect(() => {\n    if (formState.status === \"success\") {\n      onClose();\n    }\n  }, [formState.status, onClose]);\n\n  if (!open) {\n    return null;\n  }\n\n  return (\n    <Dialog onOpenChange={(isOpen) => !isOpen && onClose()} open>\n      <DialogPortal>\n        <DialogOverlay />\n        <DialogPopup className={styles.dialogPopup} data-kanban-dialog onKeyDown={handleKeyDown}>\n          <form action={submitAction} className={styles.taskForm}>\n            <input name=\"subtasks\" type=\"hidden\" value={JSON.stringify(subtasks)} />\n            <input name=\"dueDate\" type=\"hidden\" value={dueDate} />\n\n            <Input\n              autoFocus\n              className={styles.titleInput}\n              data-variant=\"borderless\"\n              defaultValue={task?.title ?? \"\"}\n              name=\"title\"\n              placeholder={mode === \"create\" ? \"New task...\" : \"Task title...\"}\n            />\n            {formState.status === \"error\" && <p className={styles.fieldError}>{formState.message}</p>}\n\n            <Input\n              className={styles.descriptionInput}\n              data-variant=\"borderless\"\n              defaultValue={task?.description ?? \"\"}\n              name=\"description\"\n              placeholder=\"Add description...\"\n            />\n\n            <SubtaskSection\n              onAddSubtask={addSubtask}\n              onRemoveSubtask={removeSubtask}\n              onUpdateSubtask={updateSubtask}\n              subtasks={subtasks}\n            />\n\n            <div className={styles.fieldRow}>\n              <Select defaultValue={defaultPriority} items={PRIORITY_ITEMS} name=\"priority\">\n                <SelectTrigger render={<Button className={styles.fieldButton} size=\"sm\" variant=\"outline\" />}>\n                  <SelectValue>\n                    {(value) => (\n                      <>\n                        <span className={styles.fieldIcon} data-urgent={value === \"urgent\"}>\n                          {PRIORITY_CONFIG[value as Priority].icon}\n                        </span>\n                        {PRIORITY_CONFIG[value as Priority].label}\n                      </>\n                    )}\n                  </SelectValue>\n                </SelectTrigger>\n                <SelectPortal>\n                  <SelectPositioner\n                    align=\"start\"\n                    alignItemWithTrigger={false}\n                    className={styles.priorityPositioner}\n                    sideOffset={6}\n                  >\n                    <SelectPopup>\n                      <SelectSpacer />\n                      <SelectList>\n                        {PRIORITY_ITEMS.map((p) => (\n                          <SelectItem key={p.value} value={p.value}>\n                            <span className={styles.fieldIcon}>{PRIORITY_CONFIG[p.value].icon}</span>\n                            <SelectItemText>{p.label}</SelectItemText>\n                            <SelectItemIndicator />\n                          </SelectItem>\n                        ))}\n                      </SelectList>\n                      <SelectSpacer />\n                    </SelectPopup>\n                  </SelectPositioner>\n                </SelectPortal>\n              </Select>\n\n              {groupBy === \"column\" && (\n                <Select\n                  defaultValue={defaultSelectedColumnId}\n                  items={columns.map((col) => ({ value: col.id, label: col.name }))}\n                  name=\"columnId\"\n                >\n                  <SelectTrigger render={<Button className={styles.fieldButton} size=\"sm\" variant=\"outline\" />}>\n                    <SelectValue>\n                      {(value) => {\n                        const col = columns.find((c) => c.id === value);\n                        return (\n                          <>\n                            <span className={styles.fieldIcon}>{COLUMN_ICONS[value] ?? <Circle size={14} />}</span>\n                            {col?.name ?? \"Select column\"}\n                          </>\n                        );\n                      }}\n                    </SelectValue>\n                  </SelectTrigger>\n                  <SelectPortal>\n                    <SelectPositioner\n                      align=\"start\"\n                      alignItemWithTrigger={false}\n                      className={styles.columnPositioner}\n                      sideOffset={6}\n                    >\n                      <SelectPopup>\n                        <SelectSpacer />\n                        <SelectList>\n                          {columns.map((col) => (\n                            <SelectItem key={col.id} value={col.id}>\n                              <span className={styles.fieldIcon}>{COLUMN_ICONS[col.id] ?? <Circle size={14} />}</span>\n                              <SelectItemText>{col.name}</SelectItemText>\n                              <SelectItemIndicator />\n                            </SelectItem>\n                          ))}\n                        </SelectList>\n                        <SelectSpacer />\n                      </SelectPopup>\n                    </SelectPositioner>\n                  </SelectPortal>\n                </Select>\n              )}\n\n              <Select<string, true> defaultValue={defaultTags} multiple name=\"tags\">\n                <SelectTrigger render={<Button className={styles.fieldButton} size=\"sm\" variant=\"outline\" />}>\n                  <span className={styles.fieldIcon}>\n                    <TagIcon size={14} />\n                  </span>\n                  <SelectValue>\n                    {(value) =>\n                      Array.isArray(value) && value.length > 0 ? (\n                        <div className={styles.tagChips}>\n                          {value.map((tag) => (\n                            <span\n                              className={styles.tagChip}\n                              key={tag}\n                              style={{ backgroundColor: TAG_COLORS[tag as Tag] }}\n                            />\n                          ))}\n                        </div>\n                      ) : (\n                        \"Tags\"\n                      )\n                    }\n                  </SelectValue>\n                </SelectTrigger>\n                <SelectPortal>\n                  <SelectPositioner\n                    align=\"start\"\n                    alignItemWithTrigger={false}\n                    className={styles.tagsPositioner}\n                    sideOffset={6}\n                  >\n                    <SelectPopup>\n                      <SelectSpacer />\n                      <SelectList>\n                        {TAG_ITEMS.map((item) => (\n                          <SelectItem key={item.value} value={item.value}>\n                            <TagDot tag={item.value as Tag} />\n                            <SelectItemText>{item.label}</SelectItemText>\n                            <SelectItemIndicator />\n                          </SelectItem>\n                        ))}\n                      </SelectList>\n                      <SelectSpacer />\n                    </SelectPopup>\n                  </SelectPositioner>\n                </SelectPortal>\n              </Select>\n\n              <Combobox<Assignee, true> defaultValue={defaultAssignees} items={assignees} multiple name=\"assignees\">\n                <ComboboxPrimitive.Trigger\n                  render={<Button className={styles.fieldButton} size=\"sm\" variant=\"outline\" />}\n                >\n                  <span className={styles.fieldIcon}>\n                    <Users size={14} />\n                  </span>\n                  <ComboboxPrimitive.Value>\n                    {(value) =>\n                      Array.isArray(value) && value.length > 0\n                        ? `${value.length} assignee${value.length > 1 ? \"s\" : \"\"}`\n                        : \"Assignees\"\n                    }\n                  </ComboboxPrimitive.Value>\n                </ComboboxPrimitive.Trigger>\n                <ComboboxPortal>\n                  <ComboboxPositioner side=\"bottom\" sideOffset={6}>\n                    <ComboboxPopup className={styles.assigneesPopup}>\n                      <ComboboxInput placeholder=\"Search assignees...\" />\n                      <ComboboxEmpty>No users found</ComboboxEmpty>\n                      <ComboboxList>\n                        {(assignee: Assignee) => (\n                          <ComboboxItem indicatorPosition=\"right\" key={assignee.id} value={assignee}>\n                            <span style={{ flex: 1 }}>{assignee.name}</span>\n                          </ComboboxItem>\n                        )}\n                      </ComboboxList>\n                    </ComboboxPopup>\n                  </ComboboxPositioner>\n                </ComboboxPortal>\n              </Combobox>\n\n              <Popover>\n                <PopoverTrigger className={styles.fieldButton} render={<Button size=\"sm\" variant=\"outline\" />}>\n                  <span className={styles.fieldIcon}>\n                    <CalendarIcon size={14} />\n                  </span>\n                  {dueDate ? parseDateString(dueDate).toLocaleDateString() : \"Due date\"}\n                </PopoverTrigger>\n                <PopoverPopup align=\"start\" arrow={false} sideOffset={6}>\n                  <Calendar\n                    className={styles.calendar}\n                    mode=\"single\"\n                    onSelect={(date) => {\n                      setDueDate(date ? formatDateString(date) : \"\");\n                    }}\n                    selected={dueDate.length > 0 ? parseDateString(dueDate) : undefined}\n                  />\n                </PopoverPopup>\n              </Popover>\n            </div>\n\n            <div className={styles.dialogFooter}>\n              {mode === \"edit\" && (\n                <Button\n                  className={styles.deleteButton}\n                  onClick={() => setDeleteConfirmOpen(true)}\n                  size=\"sm\"\n                  type=\"button\"\n                  variant=\"outline\"\n                >\n                  Delete\n                </Button>\n              )}\n              <div className={styles.footerActions}>\n                <Button disabled={isPending} size=\"sm\" type=\"submit\">\n                  {mode === \"create\" ? \"Create\" : \"Save\"}\n                  {isPending && <Loader2 aria-hidden=\"true\" className={styles.spinner} size={14} />}\n                </Button>\n              </div>\n            </div>\n          </form>\n\n          <Button\n            aria-label=\"Close dialog\"\n            className={styles.closeButton}\n            nativeButton\n            render={<DialogClose />}\n            size=\"icon\"\n            variant=\"ghost\"\n          >\n            <X aria-hidden=\"true\" size={16} />\n          </Button>\n        </DialogPopup>\n      </DialogPortal>\n\n      <AlertDialog.Root onOpenChange={setDeleteConfirmOpen} open={deleteConfirmOpen}>\n        <AlertDialogPopup className={styles.deleteDialog}>\n          <div className={styles.deleteIconWrapper}>\n            <Trash2 className={styles.deleteIcon} size={28} />\n          </div>\n          <AlertDialogTitle>Delete task?</AlertDialogTitle>\n          <AlertDialogDescription>This action cannot be undone.</AlertDialogDescription>\n          <AlertDialogFooter>\n            <AlertDialogClose render={<Button variant=\"outline\" />}>Cancel</AlertDialogClose>\n            <AlertDialogClose render={<Button variant=\"destructive\" />}>Delete</AlertDialogClose>\n          </AlertDialogFooter>\n        </AlertDialogPopup>\n      </AlertDialog.Root>\n    </Dialog>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/task-dialog.tsx"
    },
    {
      "path": "registry/brook/blocks/kanban-board/components/delete-dialog.tsx",
      "content": "\"use client\";\n\nimport { Trash2 } from \"lucide-react\";\nimport {\n  AlertDialog,\n  AlertDialogClose,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogTitle,\n} from \"@/registry/brook/ui/alert-dialog/alert-dialog\";\nimport { Button } from \"@/registry/brook/ui/button/button\";\nimport styles from \"./kanban.module.css\";\n\nexport type DeleteDialogProps = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n};\n\nexport function DeleteDialog({ open, onOpenChange }: DeleteDialogProps) {\n  return (\n    <AlertDialog onOpenChange={onOpenChange} open={open}>\n      <AlertDialogContent className={styles.deleteDialog}>\n        <div className={styles.deleteIconWrapper}>\n          <Trash2 className={styles.deleteIcon} size={28} />\n        </div>\n        <AlertDialogTitle>Delete task?</AlertDialogTitle>\n        <AlertDialogDescription>This action cannot be undone.</AlertDialogDescription>\n        <AlertDialogFooter>\n          <AlertDialogClose render={<Button variant=\"outline\" />}>Cancel</AlertDialogClose>\n          <AlertDialogClose render={<Button variant=\"destructive\" />}>Delete</AlertDialogClose>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/delete-dialog.tsx"
    },
    {
      "path": "registry/brook/blocks/kanban-board/components/filter-bar.tsx",
      "content": "\"use client\";\n\nimport { Check, Filter, Layers, X } from \"lucide-react\";\nimport { useMemo } from \"react\";\nimport { Badge } from \"@/registry/brook/ui/badge/badge\";\nimport { Button } from \"@/registry/brook/ui/button/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuCheckboxItem,\n  DropdownMenuCheckboxItemIndicator,\n  DropdownMenuGroup,\n  DropdownMenuGroupLabel,\n  DropdownMenuPopup,\n  DropdownMenuPortal,\n  DropdownMenuPositioner,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuRadioItemIndicator,\n  DropdownMenuSeparator,\n  DropdownMenuSpacer,\n  DropdownMenuTrigger,\n} from \"@/registry/brook/ui/dropdown-menu/dropdown-menu\";\nimport { capitalize, cn, GROUP_BY_ITEMS, PRIORITY_ITEMS, TAG_ITEMS } from \"../lib/project\";\nimport type { FilterConfig, GroupByField, Priority } from \"../types\";\nimport styles from \"./kanban.module.css\";\n\nfunction CheckIcon() {\n  return <Check size={12} />;\n}\n\nexport type FilterBarProps = {\n  className?: string;\n  filters: FilterConfig;\n  groupBy: GroupByField;\n  onTogglePriority: (priority: Priority, checked: boolean) => void;\n  onToggleTag: (tag: string, checked: boolean) => void;\n  onGroupByChange: (groupBy: GroupByField) => void;\n};\n\nexport function FilterBar({\n  className,\n  filters,\n  groupBy,\n  onTogglePriority,\n  onToggleTag,\n  onGroupByChange,\n}: FilterBarProps) {\n  const activeFilterCount = useMemo(\n    () => filters.priority.length + filters.tags.length,\n    [filters.priority.length, filters.tags.length]\n  );\n\n  const currentGroupByLabel = useMemo(\n    () => GROUP_BY_ITEMS.find((item) => item.value === groupBy)?.label ?? \"Group by\",\n    [groupBy]\n  );\n\n  const prioritySet = useMemo(() => new Set(filters.priority), [filters.priority]);\n  const tagSet = useMemo(() => new Set(filters.tags), [filters.tags]);\n\n  return (\n    <div className={cn(styles.filterContainer, className)} data-slot=\"filter-bar\">\n      <div className={styles.filterBar}>\n        {/* Filter Menu */}\n        <DropdownMenu>\n          <DropdownMenuTrigger\n            render={\n              <Button size=\"sm\" variant=\"outline\">\n                <Filter size={14} style={{ color: \"var(--muted-foreground)\" }} />\n                Filters\n                {activeFilterCount > 0 && (\n                  <Badge size=\"sm\" variant=\"secondary\">\n                    {activeFilterCount}\n                  </Badge>\n                )}\n              </Button>\n            }\n          />\n          <DropdownMenuPortal>\n            <DropdownMenuPositioner align=\"start\" side=\"bottom\" sideOffset={4}>\n              <DropdownMenuPopup>\n                <DropdownMenuSpacer />\n\n                <DropdownMenuGroup>\n                  <DropdownMenuGroupLabel>Priority</DropdownMenuGroupLabel>\n                  {PRIORITY_ITEMS.map((item) => (\n                    <DropdownMenuCheckboxItem\n                      checked={prioritySet.has(item.value)}\n                      key={item.value}\n                      onCheckedChange={(checked) => onTogglePriority(item.value, checked)}\n                    >\n                      <span>{item.label}</span>\n                      <DropdownMenuCheckboxItemIndicator>\n                        <CheckIcon />\n                      </DropdownMenuCheckboxItemIndicator>\n                    </DropdownMenuCheckboxItem>\n                  ))}\n                </DropdownMenuGroup>\n\n                <DropdownMenuSeparator />\n\n                <DropdownMenuGroup>\n                  <DropdownMenuGroupLabel>Tags</DropdownMenuGroupLabel>\n                  {TAG_ITEMS.map((item) => (\n                    <DropdownMenuCheckboxItem\n                      checked={tagSet.has(item.value)}\n                      key={item.value}\n                      onCheckedChange={(checked) => onToggleTag(item.value, checked)}\n                    >\n                      <span>{item.label}</span>\n                      <DropdownMenuCheckboxItemIndicator>\n                        <CheckIcon />\n                      </DropdownMenuCheckboxItemIndicator>\n                    </DropdownMenuCheckboxItem>\n                  ))}\n                </DropdownMenuGroup>\n\n                <DropdownMenuSpacer />\n              </DropdownMenuPopup>\n            </DropdownMenuPositioner>\n          </DropdownMenuPortal>\n        </DropdownMenu>\n\n        {/* Group By Menu */}\n        <DropdownMenu>\n          <DropdownMenuTrigger\n            render={\n              <Button size=\"sm\" variant=\"outline\">\n                <Layers size={14} style={{ color: \"var(--muted-foreground)\" }} />\n                {currentGroupByLabel}\n              </Button>\n            }\n          />\n          <DropdownMenuPortal>\n            <DropdownMenuPositioner align=\"start\" side=\"bottom\" sideOffset={4}>\n              <DropdownMenuPopup>\n                <DropdownMenuSpacer />\n\n                <DropdownMenuGroup>\n                  <DropdownMenuGroupLabel>Group by</DropdownMenuGroupLabel>\n                  <DropdownMenuRadioGroup\n                    onValueChange={(value) => onGroupByChange(value as GroupByField)}\n                    value={groupBy}\n                  >\n                    {GROUP_BY_ITEMS.map((item) => (\n                      <DropdownMenuRadioItem key={item.value} value={item.value}>\n                        {item.label}\n                        <DropdownMenuRadioItemIndicator>\n                          <CheckIcon />\n                        </DropdownMenuRadioItemIndicator>\n                      </DropdownMenuRadioItem>\n                    ))}\n                  </DropdownMenuRadioGroup>\n                </DropdownMenuGroup>\n\n                <DropdownMenuSpacer />\n              </DropdownMenuPopup>\n            </DropdownMenuPositioner>\n          </DropdownMenuPortal>\n        </DropdownMenu>\n      </div>\n    </div>\n  );\n}\n\nexport type ActiveFiltersProps = {\n  className?: string;\n  filters: FilterConfig;\n  onRemovePriority: (priority: Priority) => void;\n  onRemoveTag: (tag: string) => void;\n};\n\nexport function ActiveFilters({ className, filters, onRemovePriority, onRemoveTag }: ActiveFiltersProps) {\n  const hasActiveFilters = filters.priority.length > 0 || filters.tags.length > 0;\n\n  if (!hasActiveFilters) {\n    return null;\n  }\n\n  return (\n    <div className={cn(styles.filterPills, className)} data-slot=\"active-filters\">\n      {filters.priority.map((p) => (\n        <Badge className={styles.filterPill} key={p} variant=\"secondary\">\n          {capitalize(p)}\n          <button\n            aria-label={`Remove ${capitalize(p)} priority filter`}\n            className={styles.filterPillRemove}\n            onClick={() => onRemovePriority(p)}\n            type=\"button\"\n          >\n            <X aria-hidden=\"true\" size={12} />\n          </button>\n        </Badge>\n      ))}\n      {filters.tags.map((tag) => (\n        <Badge className={styles.filterPill} key={tag} variant=\"secondary\">\n          {capitalize(tag)}\n          <button\n            aria-label={`Remove ${capitalize(tag)} tag filter`}\n            className={styles.filterPillRemove}\n            onClick={() => onRemoveTag(tag)}\n            type=\"button\"\n          >\n            <X aria-hidden=\"true\" size={12} />\n          </button>\n        </Badge>\n      ))}\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/filter-bar.tsx"
    },
    {
      "path": "registry/brook/blocks/kanban-board/components/priority-icon.tsx",
      "content": "import { CircleAlert } from \"lucide-react\";\nimport type { Priority } from \"../types\";\nimport styles from \"./kanban.module.css\";\n\ntype PriorityIconProps = {\n  priority: Priority;\n  className?: string;\n};\n\nexport function PriorityIcon({ priority, className }: PriorityIconProps) {\n  if (priority === \"urgent\") {\n    return (\n      <span aria-label=\"Urgent priority\" className={`${styles.priorityIcon} ${className ?? \"\"}`} role=\"img\">\n        <CircleAlert aria-hidden=\"true\" className={styles.priorityUrgent} size={14} />\n      </span>\n    );\n  }\n\n  const barCount = priority === \"low\" ? 1 : priority === \"medium\" ? 2 : 3;\n  const label = `${priority.charAt(0).toUpperCase() + priority.slice(1)} priority`;\n\n  return (\n    <span aria-label={label} className={`${styles.priorityIcon} ${className ?? \"\"}`} role=\"img\">\n      <svg aria-hidden=\"true\" className={styles.priorityBars} fill=\"currentColor\" height=\"14\" viewBox=\"0 0 14 14\" width=\"14\">\n        {/* Bar 1 - always active */}\n        <rect height=\"4\" rx=\"1\" width=\"3\" x=\"1\" y=\"9\" />\n        {/* Bar 2 */}\n        <rect className={barCount < 2 ? styles.priorityInactive : undefined} height=\"7\" rx=\"1\" width=\"3\" x=\"5.5\" y=\"6\" />\n        {/* Bar 3 */}\n        <rect className={barCount < 3 ? styles.priorityInactive : undefined} height=\"10\" rx=\"1\" width=\"3\" x=\"10\" y=\"3\" />\n      </svg>\n    </span>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/priority-icon.tsx"
    },
    {
      "path": "registry/brook/blocks/kanban-board/hooks/use-kanban-dnd.ts",
      "content": "\"use client\";\n\nimport type { Announcements } from \"@dnd-kit/core\";\nimport {\n  type DragEndEvent,\n  type DragOverEvent,\n  type DragStartEvent,\n  KeyboardSensor,\n  MouseSensor,\n  TouchSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\nimport { arrayMove, sortableKeyboardCoordinates } from \"@dnd-kit/sortable\";\nimport { useCallback, useMemo, useRef, useState } from \"react\";\nimport { getColumnName, getTargetColumnId } from \"../lib/project\";\n\nexport type KanbanItemProps = {\n  id: string;\n  columnId: string;\n} & Record<string, unknown>;\n\nexport type KanbanColumnDataProps = {\n  id: string;\n  name: string;\n} & Record<string, unknown>;\n\nfunction getItemGroupId<T extends KanbanItemProps>(item: T): string {\n  return item.columnId;\n}\n\nfunction applyGroupChange<T extends KanbanItemProps>(item: T, groupId: string): T {\n  return { ...item, columnId: groupId };\n}\n\nfunction getOverGroupId<T extends KanbanItemProps, C extends KanbanColumnDataProps>(\n  overId: string,\n  data: T[],\n  columns: C[]\n): string | null {\n  const overItem = data.find((item) => item.id === overId);\n  if (overItem) {\n    return getItemGroupId(overItem);\n  }\n\n  const isOverColumn = columns.some((col) => col.id === overId);\n  if (isOverColumn) {\n    return overId;\n  }\n\n  return null;\n}\n\nfunction getCrossGroupInsertIndex<T extends KanbanItemProps, C extends KanbanColumnDataProps>(\n  overId: string,\n  data: T[],\n  columns: C[],\n  targetGroupId: string,\n  activeIndex: number\n): number {\n  const isOverColumn = columns.some((col) => col.id === overId);\n\n  if (isOverColumn) {\n    const itemsInColumn = data.filter((item) => getItemGroupId(item) === targetGroupId);\n    if (itemsInColumn.length > 0) {\n      const lastItemInColumn = itemsInColumn[itemsInColumn.length - 1];\n      const lastItemIndex = data.findIndex((item) => item.id === lastItemInColumn.id);\n      if (activeIndex < lastItemIndex) {\n        return lastItemIndex;\n      }\n      return lastItemIndex + 1;\n    }\n    return data.length;\n  }\n\n  const overIndex = data.findIndex((item) => item.id === overId);\n  if (overIndex === -1) {\n    return data.length;\n  }\n\n  if (activeIndex < overIndex) {\n    return overIndex - 1;\n  }\n  return overIndex;\n}\n\ntype UseKanbanDndOptions<\n  T extends KanbanItemProps = KanbanItemProps,\n  C extends KanbanColumnDataProps = KanbanColumnDataProps,\n> = {\n  data: T[];\n  columns: C[];\n  enabled: boolean;\n  onDataChange: (data: T[]) => void;\n  onDragStart?: (event: DragStartEvent) => void;\n  onDragEnd?: (event: DragEndEvent) => void;\n  onDragOver?: (event: DragOverEvent) => void;\n};\n\nexport function useKanbanDnd<\n  T extends KanbanItemProps = KanbanItemProps,\n  C extends KanbanColumnDataProps = KanbanColumnDataProps,\n>({ data, columns, enabled, onDataChange, onDragStart, onDragEnd, onDragOver }: UseKanbanDndOptions<T, C>) {\n  const [activeItemId, setActiveItemId] = useState<string | null>(null);\n  const lastCrossGroupMoveRef = useRef<string | null>(null);\n  const isUpdatingRef = useRef(false);\n\n  const activeItem = useMemo(() => data.find((item) => item.id === activeItemId) ?? null, [data, activeItemId]);\n\n  const sensors = useSensors(\n    useSensor(MouseSensor, {\n      activationConstraint: { distance: 8 },\n    }),\n    useSensor(TouchSensor, {\n      activationConstraint: { delay: 200, tolerance: 5 },\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n\n  const handleDragStart = useCallback(\n    (event: DragStartEvent) => {\n      const activeId = event.active.id as string;\n      setActiveItemId(activeId);\n      lastCrossGroupMoveRef.current = null;\n      isUpdatingRef.current = false;\n      onDragStart?.(event);\n    },\n    [onDragStart]\n  );\n\n  const handleDragOver = useCallback(\n    (event: DragOverEvent) => {\n      if (isUpdatingRef.current) {\n        return;\n      }\n\n      const { over } = event;\n\n      if (enabled && over) {\n        const activeId = event.active.id as string;\n        const overId = over.id as string;\n        const draggedItem = data.find((item) => item.id === activeId);\n\n        if (draggedItem) {\n          const overGroupId = getOverGroupId(overId, data, columns);\n          const draggedGroupId = getItemGroupId(draggedItem);\n\n          if (overGroupId && draggedGroupId !== overGroupId) {\n            const moveKey = `${activeId}:${overGroupId}`;\n            if (lastCrossGroupMoveRef.current === moveKey) {\n              return;\n            }\n            lastCrossGroupMoveRef.current = moveKey;\n            isUpdatingRef.current = true;\n\n            const newData = [...data];\n            const activeIndex = newData.findIndex((item) => item.id === activeId);\n            const finalIndex = getCrossGroupInsertIndex(overId, data, columns, overGroupId, activeIndex);\n\n            newData[activeIndex] = applyGroupChange(newData[activeIndex], overGroupId);\n\n            onDataChange(arrayMove(newData, activeIndex, finalIndex));\n\n            queueMicrotask(() => {\n              isUpdatingRef.current = false;\n            });\n            return;\n          }\n        }\n      }\n\n      onDragOver?.(event);\n    },\n    [data, columns, enabled, onDataChange, onDragOver]\n  );\n\n  const handleDragEnd = useCallback(\n    (event: DragEndEvent) => {\n      const { active, over } = event;\n\n      setActiveItemId(null);\n      lastCrossGroupMoveRef.current = null;\n      isUpdatingRef.current = false;\n      onDragEnd?.(event);\n\n      if (!over || active.id === over.id) {\n        return;\n      }\n\n      const oldIndex = data.findIndex((item) => item.id === active.id);\n      const newIndex = data.findIndex((item) => item.id === over.id);\n\n      if (oldIndex === -1 || newIndex === -1) {\n        return;\n      }\n\n      onDataChange(arrayMove(data, oldIndex, newIndex));\n    },\n    [data, onDataChange, onDragEnd]\n  );\n\n  const announcements: Announcements = useMemo(\n    () => ({\n      onDragStart({ active }) {\n        const item = data.find((i) => i.id === active.id);\n        if (!item) {\n          return \"\";\n        }\n        const columnName = getColumnName(item.columnId, columns);\n        return `Picked up item \"${(item as { title?: string }).title ?? item.id}\" from the \"${columnName}\" column`;\n      },\n      onDragOver({ active, over }) {\n        const item = data.find((i) => i.id === active.id);\n        if (!(item && over)) {\n          return \"\";\n        }\n        const targetColumnId = getTargetColumnId(over.id as string, data, columns);\n        const columnName = getColumnName(targetColumnId ?? \"\", columns);\n        return `Dragged item \"${(item as { title?: string }).title ?? item.id}\" over the \"${columnName}\" column`;\n      },\n      onDragEnd({ active, over }) {\n        const item = data.find((i) => i.id === active.id);\n        if (!(item && over)) {\n          return \"\";\n        }\n        const targetColumnId = getTargetColumnId(over.id as string, data, columns);\n        const columnName = getColumnName(targetColumnId ?? \"\", columns);\n        return `Dropped item \"${(item as { title?: string }).title ?? item.id}\" into the \"${columnName}\" column`;\n      },\n      onDragCancel({ active }) {\n        const item = data.find((i) => i.id === active.id);\n        if (!item) {\n          return \"\";\n        }\n        return `Cancelled dragging item \"${(item as { title?: string }).title ?? item.id}\"`;\n      },\n    }),\n    [data, columns]\n  );\n\n  return {\n    activeItem,\n    sensors,\n    announcements,\n    handleDragStart: enabled ? handleDragStart : undefined,\n    handleDragOver: enabled ? handleDragOver : undefined,\n    handleDragEnd: enabled ? handleDragEnd : undefined,\n  };\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/use-kanban-dnd.ts"
    },
    {
      "path": "registry/brook/blocks/kanban-board/hooks/use-task-dialog.ts",
      "content": "\"use client\";\n\nimport { useCallback, useState } from \"react\";\nimport type { Task } from \"../types\";\n\nexport type DialogState =\n  | { mode: \"closed\" }\n  | { mode: \"create\"; columnId: string }\n  | { mode: \"edit\"; task: Task }\n  | { mode: \"delete\"; task: Task };\n\nexport function useTaskDialog() {\n  const [dialogState, setDialogState] = useState<DialogState>({ mode: \"closed\" });\n\n  const openCreate = useCallback((columnId: string) => {\n    setDialogState({ mode: \"create\", columnId });\n  }, []);\n\n  const openEdit = useCallback((task: Task) => {\n    setDialogState({ mode: \"edit\", task });\n  }, []);\n\n  const openDelete = useCallback((task: Task) => {\n    setDialogState({ mode: \"delete\", task });\n  }, []);\n\n  const close = useCallback(() => {\n    setDialogState({ mode: \"closed\" });\n  }, []);\n\n  return {\n    dialogState,\n    openCreate,\n    openEdit,\n    openDelete,\n    close,\n    isOpen: dialogState.mode !== \"closed\",\n  };\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/use-task-dialog.ts"
    },
    {
      "path": "registry/brook/blocks/kanban-board/lib/project.ts",
      "content": "import type { Priority } from \"../types\";\n\nexport const AVAILABLE_TAGS = [\"bug\", \"feature\"] as const;\nexport type Tag = (typeof AVAILABLE_TAGS)[number];\n\nexport const TAG_COLORS: Record<Tag, string> = {\n  bug: \"var(--destructive)\",\n  feature: \"var(--info)\",\n};\n\nexport const PRIORITY_ITEMS: { value: Priority; label: string }[] = [\n  { value: \"urgent\", label: \"Urgent\" },\n  { value: \"high\", label: \"High\" },\n  { value: \"medium\", label: \"Medium\" },\n  { value: \"low\", label: \"Low\" },\n];\n\nexport const TAG_ITEMS = AVAILABLE_TAGS.map((tag) => ({\n  value: tag,\n  label: capitalize(tag),\n}));\n\nexport const GROUP_BY_ITEMS: { value: string; label: string }[] = [\n  { value: \"column\", label: \"Status\" },\n  { value: \"priority\", label: \"Priority\" },\n  { value: \"tag\", label: \"Tag\" },\n];\n\nexport function capitalize(str: string): string {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport function cn(...classes: (string | undefined | null | false)[]): string {\n  return classes.filter(Boolean).join(\" \");\n}\n\nexport function getTasksForColumn<T extends { id: string; columnId: string }>(items: T[], columnId: string): T[] {\n  return items.filter((item) => item.columnId === columnId);\n}\n\nexport function getTargetColumnId<T extends { id: string; columnId: string }, C extends { id: string }>(\n  overId: string,\n  items: T[],\n  columns: C[]\n): string | null {\n  const isOverColumn = columns.some((col) => col.id === overId);\n  if (isOverColumn) {\n    return overId;\n  }\n  const overItem = items.find((item) => item.id === overId);\n  return overItem?.columnId ?? null;\n}\n\nexport function getColumnName<C extends { id: string; name: string }>(columnId: string, columns: C[]): string {\n  const column = columns.find((col) => col.id === columnId);\n  return column?.name ?? columnId;\n}\n\nexport function parseDateString(dateStr: string): Date {\n  const [year, month, day] = dateStr.split(\"-\").map(Number);\n  return new Date(year, month - 1, day, 12, 0, 0);\n}\n\nexport function formatDateString(date: Date): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\n  const day = String(date.getDate()).padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/project.ts"
    },
    {
      "path": "registry/brook/blocks/kanban-board/types/index.ts",
      "content": "export type Priority = \"low\" | \"medium\" | \"high\" | \"urgent\";\n\nexport type Assignee = {\n  id: string;\n  name: string;\n  avatar?: string;\n};\n\nexport type Subtask = {\n  id: string;\n  title: string;\n  completed: boolean;\n};\n\nexport type Task = {\n  id: string;\n  title: string;\n  description: string;\n  columnId: string;\n  priority: Priority;\n  tags: string[];\n  assignees?: Assignee[];\n  subtasks?: Subtask[];\n  dueDate?: string;\n  createdAt: string;\n};\n\nexport type Column = {\n  id: string;\n  name: string;\n  order: number;\n};\n\nexport type FilterConfig = {\n  priority: Priority[];\n  tags: string[];\n};\n\nexport type GroupByField = \"column\" | \"priority\" | \"tag\";\n\nexport type KanbanData = {\n  tasks: Task[];\n  columns: Column[];\n  teamMembers: Assignee[];\n};\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/types.ts"
    },
    {
      "path": "registry/brook/blocks/kanban-board/data.json",
      "content": "{\n  \"columns\": [\n    { \"id\": \"backlog\", \"name\": \"Backlog\", \"order\": 0 },\n    { \"id\": \"todo\", \"name\": \"To Do\", \"order\": 1 },\n    { \"id\": \"in-progress\", \"name\": \"In Progress\", \"order\": 2 },\n    { \"id\": \"done\", \"name\": \"Done\", \"order\": 3 }\n  ],\n  \"assignees\": [\n    { \"id\": \"user-1\", \"name\": \"Emma Wilson\" },\n    { \"id\": \"user-2\", \"name\": \"James Chen\" },\n    { \"id\": \"user-3\", \"name\": \"Sofia Garcia\" },\n    { \"id\": \"user-4\", \"name\": \"Marcus Johnson\" },\n    { \"id\": \"user-5\", \"name\": \"Aisha Patel\" },\n    { \"id\": \"user-6\", \"name\": \"Oliver Brown\" },\n    { \"id\": \"user-7\", \"name\": \"Isabella Martinez\" },\n    { \"id\": \"user-8\", \"name\": \"William Taylor\" },\n    { \"id\": \"user-9\", \"name\": \"Mia Anderson\" },\n    { \"id\": \"user-10\", \"name\": \"Benjamin Lee\" }\n  ],\n  \"tasks\": [\n    {\n      \"id\": \"card-1\",\n      \"title\": \"Research competitor products\",\n      \"description\": \"Analyze top 5 competitors and document their key features and pricing strategies.\",\n      \"columnId\": \"todo\",\n      \"priority\": \"high\",\n      \"tags\": [\"feature\"],\n      \"assignees\": [\n        { \"id\": \"user-1\", \"name\": \"Emma Wilson\" },\n        { \"id\": \"user-2\", \"name\": \"James Chen\" },\n        { \"id\": \"user-3\", \"name\": \"Sofia Garcia\" }\n      ],\n      \"subtasks\": [\n        {\n          \"id\": \"subtask-1-1\",\n          \"title\": \"Identify top 5 competitors\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-1-2\",\n          \"title\": \"Document pricing strategies\",\n          \"completed\": false\n        },\n        {\n          \"id\": \"subtask-1-3\",\n          \"title\": \"Create comparison spreadsheet\",\n          \"completed\": false\n        }\n      ],\n      \"dueDate\": \"2025-12-18T00:00:00.000Z\",\n      \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n    },\n    {\n      \"id\": \"card-2\",\n      \"title\": \"Design system foundations\",\n      \"description\": \"Create color palette, typography scale, and spacing tokens for the design system.\",\n      \"columnId\": \"in-progress\",\n      \"priority\": \"medium\",\n      \"tags\": [\"feature\"],\n      \"assignees\": [\n        { \"id\": \"user-3\", \"name\": \"Sofia Garcia\" },\n        { \"id\": \"user-4\", \"name\": \"Marcus Johnson\" }\n      ],\n      \"subtasks\": [\n        {\n          \"id\": \"subtask-2-1\",\n          \"title\": \"Define color palette\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-2-2\",\n          \"title\": \"Create typography scale\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-2-3\",\n          \"title\": \"Define spacing tokens\",\n          \"completed\": false\n        }\n      ],\n      \"dueDate\": \"2025-12-20T00:00:00.000Z\",\n      \"createdAt\": \"2024-01-02T00:00:00.000Z\"\n    },\n    {\n      \"id\": \"card-3\",\n      \"title\": \"Set up CI/CD pipeline\",\n      \"description\": \"Configure GitHub Actions for automated testing and deployment to staging environment.\",\n      \"columnId\": \"done\",\n      \"priority\": \"high\",\n      \"tags\": [\"feature\"],\n      \"assignees\": [{ \"id\": \"user-2\", \"name\": \"James Chen\" }],\n      \"subtasks\": [\n        {\n          \"id\": \"subtask-3-1\",\n          \"title\": \"Set up GitHub Actions workflow\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-3-2\",\n          \"title\": \"Configure test automation\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-3-3\",\n          \"title\": \"Set up staging deployment\",\n          \"completed\": true\n        }\n      ],\n      \"dueDate\": \"2025-12-10T00:00:00.000Z\",\n      \"createdAt\": \"2024-01-03T00:00:00.000Z\"\n    },\n    {\n      \"id\": \"card-4\",\n      \"title\": \"Mobile responsiveness\",\n      \"description\": \"Ensure all components are responsive and work well on mobile devices.\",\n      \"columnId\": \"backlog\",\n      \"priority\": \"low\",\n      \"tags\": [\"bug\"],\n      \"assignees\": [\n        { \"id\": \"user-1\", \"name\": \"Emma Wilson\" },\n        { \"id\": \"user-5\", \"name\": \"Aisha Patel\" }\n      ],\n      \"subtasks\": [\n        {\n          \"id\": \"subtask-4-1\",\n          \"title\": \"Audit current breakpoints\",\n          \"completed\": false\n        },\n        {\n          \"id\": \"subtask-4-2\",\n          \"title\": \"Fix navigation on mobile\",\n          \"completed\": false\n        }\n      ],\n      \"dueDate\": \"2025-12-25T00:00:00.000Z\",\n      \"createdAt\": \"2024-01-04T00:00:00.000Z\"\n    }\n  ]\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/data.json"
    }
  ]
}