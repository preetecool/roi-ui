{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "expandable-card-spread",
  "type": "registry:item",
  "title": "Expandable Card Spread",
  "description": "A spread of expandable cards with mobile swipe-to-cycle stack view.",
  "dependencies": [
    "motion"
  ],
  "files": [
    {
      "path": "registry/brook/blocks/expandable-card-spread/page.tsx",
      "content": "\"use client\";\n\nimport { ExpandableCardSpread } from \"./components/expandable-card-spread\";\nimport data from \"./data.json\";\n\nexport default function Page() {\n  return <ExpandableCardSpread data={data} />;\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/expandable-card-spread/page.tsx"
    },
    {
      "path": "registry/brook/blocks/expandable-card-spread/components/expandable-card-spread.tsx",
      "content": "\"use client\";\n\nimport { Dialog } from \"@base-ui/react/dialog\";\nimport { AnimatePresence, motion, useReducedMotion } from \"motion/react\";\nimport { useState } from \"react\";\nimport { useIsMobile } from \"@/hooks/use-mobile\";\nimport styles from \"./expandable-card-spread.module.css\";\nimport { MobileStack } from \"./mobile-stack\";\n\ntype CardData = {\n  id: number;\n  title: string;\n  color: string;\n  textColor?: string;\n  description: string;\n};\n\ntype ExpandableCardSpreadProps = {\n  data: {\n    cards: CardData[];\n  };\n};\n\nexport function ExpandableCardSpread({ data }: ExpandableCardSpreadProps) {\n  const [expandedId, setExpandedId] = useState<number | null>(null);\n  const prefersReducedMotion = useReducedMotion();\n  const isMobile = useIsMobile(640);\n\n  const isExpanded = expandedId !== null;\n\n  return (\n    <div className={styles.container}>\n      <AnimatePresence mode=\"wait\">\n        {isMobile ? (\n          <motion.div\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.95 }}\n            initial={{ opacity: 0, scale: 0.95 }}\n            key=\"stack\"\n            transition={{ duration: 0.3, ease: \"easeInOut\" }}\n          >\n            <MobileStack cards={data.cards} />\n          </motion.div>\n        ) : (\n          <motion.div\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.95 }}\n            initial={{ opacity: 0, scale: 0.95 }}\n            key=\"spread\"\n            transition={{ duration: 0.3, ease: \"easeInOut\" }}\n          >\n            <div className={`${styles.spreadLayout} ${isExpanded ? styles.spreadLayoutSmall : \"\"}`}>\n              {data.cards.map((card, index) => {\n                const isOpen = expandedId === card.id;\n                return (\n                  <Dialog.Root\n                    key={`root-${card.id}`}\n                    modal={false}\n                    onOpenChange={(open) => {\n                      if (!open) {\n                        setExpandedId(null);\n                      }\n                    }}\n                    open={isOpen}\n                  >\n                    <Dialog.Trigger\n                      nativeButton={false}\n                      render={\n                        <motion.li\n                          aria-label={`Expand ${card.title}`}\n                          className={`${styles.spreadCard} ${isExpanded ? styles.spreadCardSmall : \"\"}`}\n                          layoutId={`spread-card-${card.id}`}\n                          onClick={() => {\n                            setExpandedId(card.id);\n                          }}\n                          onKeyDown={(e) => {\n                            if (e.key === \"Enter\" || e.key === \" \") {\n                              e.preventDefault();\n                              setExpandedId(card.id);\n                            }\n                          }}\n                          style={{\n                            backgroundColor: card.color,\n                            borderRadius: 20,\n                            color: card.textColor || \"#ffffff\",\n                            zIndex: index,\n                          }}\n                          transition={{\n                            layout: {\n                              type: \"spring\",\n                              bounce: 0.25,\n                            },\n                          }}\n                        />\n                      }\n                    >\n                      <motion.div\n                        className={`${styles.circle} ${isExpanded ? styles.circleSmall : \"\"}`}\n                        layoutId={`spread-circle-${card.id}`}\n                        transition={{ layout: { type: \"spring\", bounce: 0 } }}\n                      />\n                      <motion.h3\n                        className={`${styles.cardTitle} ${isExpanded ? styles.cardTitleSmall : \"\"}`}\n                        layoutId={`spread-title-${card.id}`}\n                        style={{ color: \"oklch(0.75 0 0)\" }}\n                        transition={{ layout: { type: \"spring\", bounce: 0 } }}\n                      >\n                        {card.title}\n                      </motion.h3>\n                    </Dialog.Trigger>\n\n                    <Dialog.Portal keepMounted>\n                      {isOpen ? (\n                        <div className={styles.popupPositioner} key={`positioner-${card.id}`}>\n                          <Dialog.Popup\n                            hidden={undefined}\n                            render={\n                              <motion.li\n                                className={styles.expandedCard}\n                                layoutId={`spread-card-${card.id}`}\n                                onClick={() => setExpandedId(null)}\n                                style={{\n                                  borderRadius: 20,\n                                  backgroundColor: card.color,\n                                  color: card.textColor || \"#ffffff\",\n                                  zIndex: index,\n                                  cursor: \"pointer\",\n                                }}\n                                transition={{\n                                  layout: {\n                                    type: \"spring\",\n                                    bounce: 0.15,\n                                  },\n                                }}\n                              />\n                            }\n                          >\n                            <motion.div\n                              className={styles.circleExpanded}\n                              layoutId={`spread-circle-${card.id}`}\n                              transition={{ layout: { type: \"spring\", bounce: 0 } }}\n                            />\n                            <motion.h2\n                              className={styles.expandedTitle}\n                              layoutId={`spread-title-${card.id}`}\n                              style={{ color: \"oklch(0.75 0 0)\" }}\n                              transition={{ layout: { type: \"spring\", bounce: 0 } }}\n                            >\n                              {card.title}\n                            </motion.h2>\n\n                            <motion.p\n                              animate={{ opacity: 1, y: 0 }}\n                              className={styles.expandedDescription}\n                              exit={{ opacity: 0, y: 8 }}\n                              initial={{\n                                opacity: prefersReducedMotion ? 1 : 0,\n                                y: prefersReducedMotion ? 0 : 16,\n                              }}\n                              style={{ color: \"oklch(0.75 0 0)\" }}\n                              transition={{\n                                delay: prefersReducedMotion ? 0 : 0.15,\n                                duration: prefersReducedMotion ? 0 : 0.3,\n                                type: \"spring\",\n                                bounce: 0,\n                              }}\n                            >\n                              {card.description}\n                            </motion.p>\n                          </Dialog.Popup>\n                        </div>\n                      ) : null}\n                    </Dialog.Portal>\n                  </Dialog.Root>\n                );\n              })}\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/expandable-card-spread/expandable-card-spread.tsx"
    },
    {
      "path": "registry/brook/blocks/expandable-card-spread/components/expandable-card-spread.module.css",
      "content": ".container {\n  width: 100%;\n  max-width: 900px;\n  margin: 0 auto;\n  min-height: 600px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n}\n\n.spreadLayout {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0;\n}\n\n.spreadCard {\n  cursor: pointer;\n  width: 230px;\n  height: 290px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-end;\n  padding: 24px;\n  border: none;\n  margin-left: -60px;\n}\n\n.spreadCard:first-child {\n  margin-left: 0;\n}\n\n.spreadCard:focus-visible {\n  outline: 2px solid var(--ring);\n  outline-offset: 2px;\n}\n\n@media (max-width: 1024px) {\n  .spreadCard {\n    width: 155px;\n    height: 195px;\n    padding: 14px;\n    margin-left: -55px;\n  }\n\n  .spreadCard:first-child {\n    margin-left: 0;\n  }\n\n  .circle {\n    width: 20px;\n    height: 20px;\n    margin-bottom: 8px;\n  }\n\n  .cardTitle {\n    font-size: 1rem;\n  }\n}\n\n.spreadLayoutSmall {\n  position: fixed;\n  bottom: 90px;\n  left: 50%;\n  transform: translateX(-50%);\n  height: auto;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n  gap: 0;\n}\n\n.spreadLayoutSmall .spreadCard {\n  margin-left: -120px;\n}\n\n.spreadLayoutSmall .spreadCard:first-child {\n  margin-left: 0;\n}\n\n.spreadCardSmall {\n  width: 170px;\n  height: 210px;\n  padding: 12px;\n}\n\n.cardTitle {\n  font-size: 1.4rem;\n  font-weight: 500;\n  line-height: 1.3;\n  letter-spacing: -0.01em;\n  white-space: pre-line;\n  text-align: left;\n}\n\n.cardTitleSmall {\n  font-size: 0.9rem;\n  line-height: 1.2;\n}\n\n.circle {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.25);\n  margin-bottom: 12px;\n}\n\n.circleSmall {\n  width: 20px;\n  height: 20px;\n  margin-bottom: 6px;\n}\n\n.circleExpanded {\n  width: 140px;\n  height: 140px;\n  border-radius: 50%;\n  background-color: rgba(255, 255, 255, 0.25);\n  margin-bottom: 26px;\n  align-self: center;\n}\n\n.popupPositioner {\n  position: fixed;\n  inset: 0 0 40px 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  pointer-events: none;\n}\n\n.expandedCard {\n  width: 400px;\n  min-height: 500px;\n  padding: 24px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-end;\n  gap: 12px;\n  pointer-events: auto;\n}\n\n.expandedTitle {\n  font-size: 36px;\n  font-weight: 500;\n  margin: 0;\n  letter-spacing: -0.02em;\n  line-height: 1.1;\n  white-space: pre-line;\n  text-align: left;\n}\n\n.expandedDescription {\n  font-size: var(--font-size-base, 1rem);\n  line-height: 1.8;\n  margin: 0;\n  opacity: 0.8;\n}\n\n.mobileStack {\n  position: relative;\n  width: 100%;\n  max-width: 320px;\n  height: 420px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.mobileCard {\n  position: absolute;\n  width: 300px;\n  height: 400px;\n  border-radius: 20px;\n  padding: 24px;\n  padding-bottom: 56px;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-end;\n  cursor: grab;\n  touch-action: pan-y;\n  user-select: none;\n}\n\n.mobileCard:active {\n  cursor: grabbing;\n}\n\n.mobileDescription {\n  font-size: var(--font-size-sm, 0.875rem);\n  line-height: 1.6;\n  margin: 12px 0 0 0;\n  opacity: 0.85;\n}\n\n.swipeHint {\n  position: absolute;\n  bottom: 24px;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: center;\n  pointer-events: none;\n}\n\n.swipeHint span {\n  font-size: var(--font-size-xs, 0.75rem);\n  opacity: 0.5;\n  text-transform: uppercase;\n  letter-spacing: 0.05em;\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/expandable-card-spread/expandable-card-spread.module.css"
    },
    {
      "path": "registry/brook/blocks/expandable-card-spread/components/mobile-stack.tsx",
      "content": "\"use client\";\n\nimport { motion, type PanInfo } from \"motion/react\";\nimport { useState } from \"react\";\nimport styles from \"./expandable-card-spread.module.css\";\n\ntype CardData = {\n  id: number;\n  title: string;\n  color: string;\n  textColor?: string;\n  description: string;\n};\n\ntype MobileStackProps = {\n  cards: CardData[];\n};\n\nconst SWIPE_THRESHOLD = 100;\n\nexport function MobileStack({ cards }: MobileStackProps) {\n  const [frontIndex, setFrontIndex] = useState(0);\n\n  const handleDragEnd = (_: unknown, info: PanInfo) => {\n    if (Math.abs(info.offset.x) > SWIPE_THRESHOLD) {\n      setFrontIndex((prev) => (prev + 1) % cards.length);\n    }\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.mobileStack}>\n        {cards.map((card, i) => {\n          const stackPosition = (i - frontIndex + cards.length) % cards.length;\n          const isTopCard = stackPosition === 0;\n\n          return (\n            <motion.div\n              animate={{\n                scale: 1 - stackPosition * 0.03,\n                x: stackPosition * (13 - stackPosition),\n                y: stackPosition * 6,\n                rotate: Math.sqrt(stackPosition) * 3,\n              }}\n              className={styles.mobileCard}\n              drag={isTopCard ? \"x\" : false}\n              dragConstraints={{ left: 0, right: 0 }}\n              dragElastic={1}\n              key={card.id}\n              layout\n              onDragEnd={isTopCard ? handleDragEnd : undefined}\n              style={{\n                backgroundColor: card.color,\n                color: card.textColor || \"#ffffff\",\n                zIndex: cards.length - stackPosition,\n                cursor: isTopCard ? \"grab\" : \"auto\",\n              }}\n              transition={{\n                type: \"spring\",\n                stiffness: 300,\n                damping: 25,\n              }}\n              whileDrag={{ cursor: \"grabbing\", scale: 1.02 }}\n            >\n              <div className={styles.circle} />\n              <h3 className={styles.cardTitle}>{card.title}</h3>\n              <p className={styles.mobileDescription}>{card.description}</p>\n            </motion.div>\n          );\n        })}\n      </div>\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/expandable-card-spread/mobile-stack.tsx"
    },
    {
      "path": "registry/brook/blocks/expandable-card-spread/data.json",
      "content": "{\n  \"cards\": [\n    {\n      \"id\": 1,\n      \"title\": \"Design\\nSystems\",\n      \"color\": \"oklch(0.162 0.000 0.0)\",\n      \"textColor\": \"var(--secondary-foreground)\",\n      \"description\": \"A structured approach to building reusable components and patterns that maintain consistency across products.\"\n    },\n    {\n      \"id\": 2,\n      \"title\": \"Motion\\nPrinciples\",\n      \"color\": \"oklch(0.195 0.000 0.0)\",\n      \"textColor\": \"var(--secondary-foreground)\",\n      \"description\": \"Guidelines for meaningful animation that communicates state changes and guides user attention without distraction.\"\n    },\n    {\n      \"id\": 3,\n      \"title\": \"Accessible\\nInterfaces\",\n      \"color\": \"oklch(0.254 0.000 0.0)\",\n      \"textColor\": \"var(--secondary-foreground)\",\n      \"description\": \"Techniques for building interfaces that work for everyone, regardless of ability or assistive technology.\"\n    },\n    {\n      \"id\": 4,\n      \"title\": \"Layout\\nComposition\",\n      \"color\": \"oklch(0.302 0.000 0.0)\",\n      \"textColor\": \"var(--secondary-foreground)\",\n      \"description\": \"Strategies for arranging elements on screen to create clear visual hierarchy and intuitive navigation.\"\n    },\n    {\n      \"id\": 5,\n      \"title\": \"Type\\nScale\",\n      \"color\": \"oklch(0.348 0.000 0.0)\",\n      \"textColor\": \"var(--secondary-foreground)\",\n      \"description\": \"A modular system for sizing and spacing text that creates rhythm and readability across breakpoints.\"\n    }\n  ]\n}",
      "type": "registry:file",
      "target": "~/components/blocks/expandable-card-spread/data.json"
    },
    {
      "path": "hooks/use-mobile.ts",
      "content": "\"use client\";\n\nimport { useEffect, useState } from \"react\";\n\nconst DEFAULT_MOBILE_BREAKPOINT = 768;\n\nexport function useIsMobile(breakpoint = DEFAULT_MOBILE_BREAKPOINT) {\n  const [isMobile, setIsMobile] = useState<boolean | undefined>(undefined);\n\n  useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${breakpoint - 1}px)`);\n    const onChange = () => {\n      setIsMobile(window.innerWidth < breakpoint);\n    };\n    mql.addEventListener(\"change\", onChange);\n    setIsMobile(window.innerWidth < breakpoint);\n    return () => mql.removeEventListener(\"change\", onChange);\n  }, [breakpoint]);\n\n  return !!isMobile;\n}\n",
      "type": "registry:file",
      "target": "~/hooks/use-mobile.ts"
    }
  ]
}