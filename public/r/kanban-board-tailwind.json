{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "kanban-board-tailwind",
  "type": "registry:item",
  "title": "Kanban Board (Tailwind)",
  "description": "A full-featured kanban board with drag-and-drop functionality.",
  "dependencies": [
    "@dnd-kit/core",
    "@dnd-kit/sortable",
    "@dnd-kit/utilities",
    "lucide-react"
  ],
  "registryDependencies": [
    "https://roiui.com/r/alert-dialog-tailwind.json",
    "https://roiui.com/r/avatar-tailwind.json",
    "https://roiui.com/r/badge-tailwind.json",
    "https://roiui.com/r/button-tailwind.json",
    "https://roiui.com/r/calendar-tailwind.json",
    "https://roiui.com/r/card-tailwind.json",
    "https://roiui.com/r/checkbox-tailwind.json",
    "https://roiui.com/r/checkbox-group-tailwind.json",
    "https://roiui.com/r/combobox-tailwind.json",
    "https://roiui.com/r/context-menu-tailwind.json",
    "https://roiui.com/r/dialog-tailwind.json",
    "https://roiui.com/r/dropdown-menu-tailwind.json",
    "https://roiui.com/r/field-tailwind.json",
    "https://roiui.com/r/form-tailwind.json",
    "https://roiui.com/r/input-tailwind.json",
    "https://roiui.com/r/kbd-tailwind.json",
    "https://roiui.com/r/popover-tailwind.json",
    "https://roiui.com/r/select-tailwind.json"
  ],
  "files": [
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/components/kanban.tsx",
      "content": "\"use client\";\n\nimport {\n  type CollisionDetection,\n  closestCorners,\n  DndContext,\n  type DragEndEvent,\n  type DragOverEvent,\n  DragOverlay,\n  type DragStartEvent,\n  pointerWithin,\n  useDroppable,\n} from \"@dnd-kit/core\";\nimport { SortableContext, useSortable, verticalListSortingStrategy } from \"@dnd-kit/sortable\";\nimport { CSS } from \"@dnd-kit/utilities\";\nimport { Pencil, Trash2 } from \"lucide-react\";\nimport { createContext, useContext, useMemo } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { cn } from \"@/lib/utils\";\nimport { Card } from \"@/registry/brook/tailwind/ui/card\";\nimport {\n  ContextMenu,\n  ContextMenuItem,\n  ContextMenuPopup,\n  ContextMenuPortal,\n  ContextMenuPositioner,\n  ContextMenuSeparator,\n  ContextMenuSpacer,\n  ContextMenuTrigger,\n} from \"@/registry/brook/tailwind/ui/context-menu\";\nimport { type KanbanColumnDataProps, type KanbanItemProps, useKanbanDnd } from \"../hooks/use-kanban-dnd\";\nimport { getTasksForColumn } from \"../lib/project\";\n\nconst kanbanCollisionDetection: CollisionDetection = (args) => {\n  const pointerCollisions = pointerWithin(args);\n  if (pointerCollisions.length > 0) {\n    return pointerCollisions;\n  }\n  return closestCorners(args);\n};\n\ntype KanbanContextValue<T extends KanbanItemProps = KanbanItemProps> = {\n  getItemsForColumn: (columnId: string) => T[];\n  onEditItem: (item: T) => void;\n  onDeleteItem: (item: T) => void;\n};\n\nconst KanbanContext = createContext<KanbanContextValue<KanbanItemProps> | null>(null);\n\nexport function useKanbanContext<T extends KanbanItemProps = KanbanItemProps>() {\n  const context = useContext(KanbanContext) as KanbanContextValue<T> | null;\n  if (!context) {\n    throw new Error(\"useKanbanContext must be used within a KanbanProvider\");\n  }\n  return context;\n}\n\nexport type KanbanProviderProps<\n  T extends KanbanItemProps = KanbanItemProps,\n  C extends KanbanColumnDataProps = KanbanColumnDataProps,\n> = {\n  children: (column: C) => React.ReactNode;\n  columns: C[];\n  data: T[];\n  className?: string;\n  onDataChange: (data: T[]) => void;\n  onDragStart?: (event: DragStartEvent) => void;\n  onDragEnd?: (event: DragEndEvent) => void;\n  onDragOver?: (event: DragOverEvent) => void;\n  onEditItem: (item: T) => void;\n  onDeleteItem: (item: T) => void;\n  renderOverlay?: (item: T) => React.ReactNode;\n};\n\nexport function KanbanProvider<\n  T extends KanbanItemProps = KanbanItemProps,\n  C extends KanbanColumnDataProps = KanbanColumnDataProps,\n>({\n  children,\n  columns,\n  data,\n  className,\n  onDataChange,\n  onDragStart,\n  onDragEnd,\n  onDragOver,\n  onEditItem,\n  onDeleteItem,\n  renderOverlay,\n}: KanbanProviderProps<T, C>) {\n  const { activeItem, sensors, announcements, handleDragStart, handleDragOver, handleDragEnd } = useKanbanDnd({\n    data,\n    columns,\n    enabled: true,\n    onDataChange,\n    onDragStart,\n    onDragEnd,\n    onDragOver,\n  });\n\n  const getItemsForColumn = useMemo(() => (columnId: string) => getTasksForColumn(data, columnId) as T[], [data]);\n\n  const contextValue = useMemo<KanbanContextValue<T>>(\n    () => ({\n      getItemsForColumn,\n      onEditItem,\n      onDeleteItem,\n    }),\n    [getItemsForColumn, onEditItem, onDeleteItem]\n  );\n\n  return (\n    <KanbanContext.Provider value={contextValue as KanbanContextValue<KanbanItemProps>}>\n      <DndContext\n        accessibility={{ announcements }}\n        collisionDetection={kanbanCollisionDetection}\n        id=\"kanban-dnd\"\n        onDragEnd={handleDragEnd}\n        onDragOver={handleDragOver}\n        onDragStart={handleDragStart}\n        sensors={sensors}\n      >\n        <div className={cn(\"flex min-h-0 flex-1 flex-col\", className)} data-slot=\"kanban-root\">\n          <div\n            className=\"flex min-h-0 flex-1 items-stretch gap-4 overflow-x-auto overflow-y-hidden p-4\"\n            data-slot=\"kanban-board\"\n          >\n            {columns.map((column) => children(column))}\n          </div>\n        </div>\n        {typeof window !== \"undefined\" &&\n          createPortal(\n            <DragOverlay>{activeItem && renderOverlay ? renderOverlay(activeItem as T) : null}</DragOverlay>,\n            document.body\n          )}\n      </DndContext>\n    </KanbanContext.Provider>\n  );\n}\n\nexport type KanbanColumnProps = React.ComponentProps<\"div\"> & {\n  id: string;\n};\n\nexport function KanbanColumn({ id, className, children, ...props }: KanbanColumnProps) {\n  const { setNodeRef } = useDroppable({ id });\n\n  return (\n    <div\n      className={cn(\"flex w-80 shrink-0 flex-col rounded-[var(--radius)] bg-[var(--col-background)]\", className)}\n      data-slot=\"kanban-column\"\n      ref={setNodeRef}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport type KanbanColumnHeaderProps = React.ComponentProps<\"div\">;\n\nexport function KanbanColumnHeader({ className, ...props }: KanbanColumnHeaderProps) {\n  return (\n    <div\n      className={cn(\"flex items-center justify-between px-4 py-3\", className)}\n      data-slot=\"kanban-column-header\"\n      {...props}\n    />\n  );\n}\n\nexport type KanbanCardListProps<T extends KanbanItemProps = KanbanItemProps> = Omit<\n  React.ComponentProps<\"div\">,\n  \"children\" | \"id\"\n> & {\n  id: string;\n  children: (item: T) => React.ReactNode;\n};\n\nexport function KanbanCardList<T extends KanbanItemProps = KanbanItemProps>({\n  id,\n  children,\n  className,\n  ...props\n}: KanbanCardListProps<T>) {\n  const { getItemsForColumn } = useKanbanContext<T>();\n  const items = getItemsForColumn(id);\n  const itemIds = items.map((item) => item.id);\n\n  return (\n    <SortableContext items={itemIds} strategy={verticalListSortingStrategy}>\n      <div\n        className={cn(\"flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto p-2\", className)}\n        data-slot=\"kanban-card-list\"\n        {...props}\n      >\n        {items.map(children)}\n      </div>\n    </SortableContext>\n  );\n}\n\nexport type KanbanCardProps<T extends KanbanItemProps = KanbanItemProps> = {\n  id: string;\n  item: T;\n  children: React.ReactNode;\n  isOverlay?: boolean;\n  className?: string;\n};\n\nexport function KanbanCard<T extends KanbanItemProps = KanbanItemProps>({\n  id,\n  item,\n  children,\n  isOverlay,\n  className,\n}: KanbanCardProps<T>) {\n  const { onEditItem, onDeleteItem } = useKanbanContext<T>();\n\n  const { attributes, listeners, setNodeRef, transform, transition, isDragging } = useSortable({\n    id,\n    disabled: isOverlay,\n  });\n\n  const style = {\n    transition,\n    transform: CSS.Transform.toString(transform),\n  };\n\n  const cardContent = (\n    <Card\n      className={cn(\n        \"cursor-grab touch-manipulation bg-background p-4 transition-[box-shadow,border-color] duration-150 ease-out\",\n        \"hover:bg-[oklch(from_var(--accent)_l_c_h_/_0.15)] hover:shadow-[var(--shadow-border-stack)]\",\n        \"focus-visible:outline-2 focus-visible:outline-[var(--ring)] focus-visible:outline-offset-2\",\n        \"[&[data-slot=card]]:gap-2 [&[data-slot=card]]:p-4 [&[data-slot=card]]:shadow-[0_0_0_1px_oklch(from_var(--border)_l_c_h_/_0.15)]\",\n        \"[&_[data-slot=card-header]]:flex [&_[data-slot=card-header]]:items-start [&_[data-slot=card-header]]:justify-between [&_[data-slot=card-header]]:gap-2 [&_[data-slot=card-header]]:p-0\",\n        \"[&_[data-slot=card-title]]:font-medium [&_[data-slot=card-title]]:text-foreground [&_[data-slot=card-title]]:text-sm [&_[data-slot=card-title]]:leading-[1.4]\",\n        \"[&_[data-slot=card-content]]:flex [&_[data-slot=card-content]]:flex-col [&_[data-slot=card-content]]:gap-2 [&_[data-slot=card-content]]:p-0\",\n        \"[&_[data-slot=card-description]]:line-clamp-1 [&_[data-slot=card-description]]:text-[0.8125rem] [&_[data-slot=card-description]]:text-muted-foreground [&_[data-slot=card-description]]:leading-[1.5]\",\n        isDragging === true && !isOverlay && \"cursor-grabbing opacity-50\",\n        isOverlay === true && \"cursor-grabbing shadow-lg\",\n        className\n      )}\n    >\n      {children}\n    </Card>\n  );\n\n  if (isOverlay) {\n    return cardContent;\n  }\n\n  return (\n    <div className=\"relative block\" ref={setNodeRef} style={style} {...attributes} {...listeners}>\n      <ContextMenu>\n        <ContextMenuTrigger className=\"block\">{cardContent}</ContextMenuTrigger>\n        <ContextMenuPortal>\n          <ContextMenuPositioner>\n            <ContextMenuPopup>\n              <ContextMenuSpacer />\n              <ContextMenuItem icon={<Pencil size={14} />} onClick={() => onEditItem(item)}>\n                Edit\n              </ContextMenuItem>\n              <ContextMenuSeparator />\n              <ContextMenuItem icon={<Trash2 size={14} />} onClick={() => onDeleteItem(item)} variant=\"destructive\">\n                Delete\n              </ContextMenuItem>\n              <ContextMenuSpacer />\n            </ContextMenuPopup>\n          </ContextMenuPositioner>\n        </ContextMenuPortal>\n      </ContextMenu>\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/kanban.tsx"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/components/project-board.tsx",
      "content": "\"use client\";\n\nimport {\n  Calendar,\n  CheckCircle2,\n  Circle,\n  CircleDashed,\n  CircleDot,\n  ListTodo,\n  MessageCircleMore,\n  Plus,\n  User,\n} from \"lucide-react\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/registry/brook/tailwind/ui/avatar\";\nimport { Badge } from \"@/registry/brook/tailwind/ui/badge\";\nimport { Button } from \"@/registry/brook/tailwind/ui/button\";\nimport { CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"@/registry/brook/tailwind/ui/card\";\nimport { capitalize, TAG_COLORS, type Tag } from \"../lib/project\";\nimport type { FilterConfig, GroupByField, KanbanData, Priority, Task } from \"../types\";\nimport { DeleteDialog } from \"./delete-dialog\";\nimport { ActiveFilters, FilterBar } from \"./filter-bar\";\nimport { KanbanCard, KanbanCardList, KanbanColumn, KanbanColumnHeader, KanbanProvider } from \"./kanban\";\nimport { PriorityIcon } from \"./priority-icon\";\nimport { TaskDialog } from \"./task-dialog\";\n\nexport type ProjectBoardProps = {\n  data: KanbanData;\n};\n\nconst COLUMN_ICONS: Record<string, React.ReactNode> = {\n  backlog: <CircleDashed size={14} />,\n  todo: <Circle size={14} />,\n  \"in-progress\": <CircleDot size={14} />,\n  done: <CheckCircle2 size={14} />,\n};\n\nfunction getDaysLeft(dueDate: string | undefined, now: Date | null): number | null {\n  if (!(dueDate && now)) {\n    return null;\n  }\n  const due = new Date(dueDate);\n  const today = new Date(now);\n  today.setHours(0, 0, 0, 0);\n  due.setHours(0, 0, 0, 0);\n  const diffTime = due.getTime() - today.getTime();\n  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n}\n\nfunction useCurrentDate() {\n  const [now, setNow] = useState<Date | null>(null);\n  useEffect(() => {\n    setNow(new Date());\n  }, []);\n  return now;\n}\n\nfunction TaskCardContent({ task, onEdit }: { task: Task; onEdit?: (task: Task) => void }) {\n  const now = useCurrentDate();\n  const subtaskCount = task.subtasks?.length ?? 0;\n  const completedSubtasks = task.subtasks?.filter((st) => st.completed).length ?? 0;\n  const daysLeft = getDaysLeft(task.dueDate, now);\n\n  const renderAssignees = () => {\n    if (!task.assignees) {\n      return null;\n    }\n\n    if (task.assignees.length > 0) {\n      return (\n        <Button\n          aria-label=\"Edit assignees\"\n          className=\"flex !h-auto items-center border-none bg-transparent !p-0 hover:bg-transparent\"\n          onClick={() => onEdit?.(task)}\n          variant=\"ghost\"\n        >\n          {task.assignees.slice(0, 3).map((user) => (\n            <div className=\"-ml-2 first:ml-0\" key={user.id}>\n              <Avatar className=\"h-6 w-6 shadow-[inset_0_0_0_0.5px_oklch(from_var(--border)_l_c_h_/_0.1)] text-[0.5rem]\">\n                <AvatarImage alt={user.name} src={user.avatar} />\n                <AvatarFallback>\n                  {user.name\n                    .split(\" \")\n                    .map((n) => n[0])\n                    .join(\"\")}\n                </AvatarFallback>\n              </Avatar>\n            </div>\n          ))}\n          {task.assignees.length > 3 && (\n            <div className=\"-ml-2 flex h-6 w-6 items-center justify-center rounded-full shadow-[inset_0_0_0_0.5px_oklch(from_var(--border)_l_c_h_/_0.2)] bg-muted font-medium text-[0.5rem] text-muted-foreground\">\n              +{task.assignees.length - 3}\n            </div>\n          )}\n        </Button>\n      );\n    }\n\n    return (\n      <Button\n        aria-label=\"Add assignees\"\n        className=\"flex !h-auto items-center border-none bg-transparent !p-0 hover:bg-transparent\"\n        onClick={() => onEdit?.(task)}\n        variant=\"ghost\"\n      >\n        <div className=\"flex h-6 w-6 cursor-pointer items-center justify-center rounded-full border border-[oklch(from_var(--border)_l_c_h_/_0.4)] border-dashed text-muted-foreground transition-all duration-150 hover:border-[oklch(from_var(--border)_l_c_h_/_0.6)] hover:text-foreground\">\n          <Plus aria-hidden=\"true\" size={8} />\n        </div>\n        <div className=\"-ml-2 flex h-6 w-6 items-center justify-center rounded-full shadow-[inset_0_0_0_0.5px_oklch(from_var(--border)_l_c_h_/_0.2)] bg-[var(--mix-card-33-bg)] text-muted-foreground\">\n          <User aria-hidden=\"true\" size={10} />\n        </div>\n      </Button>\n    );\n  };\n\n  return (\n    <>\n      <CardHeader>\n        <CardTitle>{task.title}</CardTitle>\n      </CardHeader>\n      <CardContent>\n        {task.description ? <CardDescription>{task.description}</CardDescription> : null}\n        <div className=\"flex items-center gap-1 pt-2\" onPointerDown={(e) => e.stopPropagation()}>\n          <PriorityIcon priority={task.priority} />\n          {task.tags.length > 0 && (\n            <div className=\"flex flex-wrap gap-1\">\n              {task.tags.map((tag) => (\n                <Badge key={tag} size=\"sm\" variant=\"outline\">\n                  <span\n                    className=\"h-1.5 w-1.5 shrink-0 rounded-full\"\n                    style={{ backgroundColor: TAG_COLORS[tag as Tag] }}\n                  />\n                  {capitalize(tag)}\n                </Badge>\n              ))}\n            </div>\n          )}\n        </div>\n      </CardContent>\n      <div className=\"-mb-1 flex flex-col gap-1\" onPointerDown={(e) => e.stopPropagation()}>\n        <div className=\"-mx-4 pt-2 pb-2\">\n          <div className=\"h-px bg-[oklch(from_var(--border)_l_c_h_/_0.2)]\" />\n        </div>\n        <CardFooter className=\"flex items-center justify-between gap-2 p-0\">\n          <div className=\"flex items-center gap-2\">\n            {renderAssignees()}\n            <Button\n              aria-label=\"Comments\"\n              className={cn(\n                \"flex !h-auto items-center justify-center gap-1 !px-2 !py-1\",\n                \"rounded-[calc(var(--radius)-2px)] border-[0.5px] border-[oklch(from_var(--border)_l_c_h_/_0.4)]\",\n                \"text-muted-foreground transition-all duration-150\",\n                \"hover:bg-[var(--mix-card-50-bg)] hover:text-foreground\"\n              )}\n              onClick={() => onEdit?.(task)}\n              variant=\"ghost\"\n            >\n              <MessageCircleMore aria-hidden=\"true\" size={12} />\n            </Button>\n            {subtaskCount > 0 && (\n              <Button\n                aria-label={`${completedSubtasks} of ${subtaskCount} subtasks completed`}\n                className={cn(\n                  \"flex !h-auto items-center justify-center gap-1 !px-2 !py-1\",\n                  \"rounded-[calc(var(--radius)-2px)] border-[0.5px] border-[oklch(from_var(--border)_l_c_h_/_0.4)]\",\n                  \"text-muted-foreground transition-all duration-150\",\n                  \"hover:bg-[var(--mix-card-50-bg)] hover:text-foreground\"\n                )}\n                onClick={() => onEdit?.(task)}\n                variant=\"ghost\"\n              >\n                <ListTodo aria-hidden=\"true\" size={12} />\n                <span className=\"font-medium text-[0.6875rem] leading-none\">\n                  {completedSubtasks}/{subtaskCount}\n                </span>\n              </Button>\n            )}\n          </div>\n          {daysLeft !== null && (\n            <Button\n              aria-label={`${daysLeft} days left`}\n              className={cn(\n                \"flex !h-auto items-center justify-center gap-1 !px-2 !py-1\",\n                \"rounded-[calc(var(--radius)-2px)] border-[0.5px] border-[oklch(from_var(--border)_l_c_h_/_0.4)]\",\n                \"text-muted-foreground transition-all duration-150\",\n                \"hover:bg-[var(--mix-card-50-bg)] hover:text-foreground\"\n              )}\n              onClick={() => onEdit?.(task)}\n              variant=\"ghost\"\n            >\n              <Calendar aria-hidden=\"true\" size={12} />\n              <span\n                className={cn(\n                  \"font-medium text-[0.6875rem] leading-none\",\n                  daysLeft >= 0 && daysLeft <= 2 && \"text-[var(--warning)]\",\n                  daysLeft < 0 && \"text-destructive\"\n                )}\n              >\n                {daysLeft}\n              </span>\n            </Button>\n          )}\n        </CardFooter>\n      </div>\n    </>\n  );\n}\n\nconst DEFAULT_FILTERS: FilterConfig = { priority: [], tags: [] };\n\ntype DialogState =\n  | { mode: \"closed\" }\n  | { mode: \"create\"; columnId: string }\n  | { mode: \"edit\"; task: Task }\n  | { mode: \"delete\"; task: Task };\n\nexport function ProjectBoard({ data }: ProjectBoardProps) {\n  const [tasks, setTasks] = useState<Task[]>(data.tasks);\n  const [filters, setFilters] = useState<FilterConfig>(DEFAULT_FILTERS);\n\n  const togglePriority = useCallback((priority: Priority, checked: boolean) => {\n    setFilters((prev) => ({\n      ...prev,\n      priority: checked ? [...prev.priority, priority] : prev.priority.filter((p) => p !== priority),\n    }));\n  }, []);\n\n  const toggleTag = useCallback((tag: string, checked: boolean) => {\n    setFilters((prev) => ({\n      ...prev,\n      tags: checked ? [...prev.tags, tag] : prev.tags.filter((t) => t !== tag),\n    }));\n  }, []);\n\n  const activeFilterCount = filters.priority.length + filters.tags.length;\n\n  const [groupBy, setGroupBy] = useState<GroupByField>(\"column\");\n  const [dialogState, setDialogState] = useState<DialogState>({ mode: \"closed\" });\n\n  const openCreate = useCallback((columnId: string) => {\n    setDialogState({ mode: \"create\", columnId });\n  }, []);\n\n  const openEdit = useCallback((task: Task) => {\n    setDialogState({ mode: \"edit\", task });\n  }, []);\n\n  const openDelete = useCallback((task: Task) => {\n    setDialogState({ mode: \"delete\", task });\n  }, []);\n\n  const closeDialog = useCallback(() => {\n    setDialogState({ mode: \"closed\" });\n  }, []);\n\n  return (\n    <div className=\"flex min-h-0 flex-1 flex-col\">\n      {/* Toolbar */}\n      <FilterBar\n        filters={filters}\n        groupBy={groupBy}\n        onGroupByChange={setGroupBy}\n        onTogglePriority={togglePriority}\n        onToggleTag={toggleTag}\n      />\n\n      {activeFilterCount > 0 && (\n        <div className=\"px-4 pb-2\">\n          <ActiveFilters\n            filters={filters}\n            onRemovePriority={(p) => togglePriority(p, false)}\n            onRemoveTag={(t) => toggleTag(t, false)}\n          />\n        </div>\n      )}\n\n      {/* Board */}\n      <KanbanProvider\n        columns={data.columns}\n        data={tasks}\n        onDataChange={setTasks}\n        onDeleteItem={openDelete}\n        onEditItem={openEdit}\n        renderOverlay={(task) => (\n          <KanbanCard id={task.id} isOverlay item={task}>\n            <TaskCardContent task={task} />\n          </KanbanCard>\n        )}\n      >\n        {(column) => (\n          <KanbanColumn id={column.id} key={column.id}>\n            <KanbanColumnHeader>\n              <div className=\"flex items-center gap-2\">\n                {COLUMN_ICONS[column.id] ? (\n                  <span className=\"flex items-center justify-center text-muted-foreground\">\n                    {COLUMN_ICONS[column.id]}\n                  </span>\n                ) : null}\n                <h2 className=\"m-0 font-semibold text-sm\">{column.name}</h2>\n              </div>\n              <Button\n                aria-label={`Add task to ${column.name}`}\n                onClick={() => openCreate(column.id)}\n                size=\"icon\"\n                variant=\"ghost\"\n              >\n                <Plus size={16} />\n              </Button>\n            </KanbanColumnHeader>\n\n            <KanbanCardList<Task> id={column.id}>\n              {(task) => (\n                <KanbanCard id={task.id} item={task} key={task.id}>\n                  <TaskCardContent onEdit={openEdit} task={task} />\n                </KanbanCard>\n              )}\n            </KanbanCardList>\n          </KanbanColumn>\n        )}\n      </KanbanProvider>\n\n      {/* Task Dialog */}\n      <TaskDialog\n        assignees={data.teamMembers}\n        columnId={dialogState.mode === \"create\" ? dialogState.columnId : undefined}\n        columns={data.columns}\n        groupBy={groupBy}\n        mode={dialogState.mode === \"create\" ? \"create\" : \"edit\"}\n        onClose={closeDialog}\n        open={dialogState.mode === \"create\" || dialogState.mode === \"edit\"}\n        task={dialogState.mode === \"edit\" ? dialogState.task : undefined}\n      />\n\n      {/* Delete Dialog (standalone - from context menu) */}\n      <DeleteDialog onOpenChange={(open) => !open && closeDialog()} open={dialogState.mode === \"delete\"} />\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/project-board.tsx"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/components/task-dialog.tsx",
      "content": "\"use client\";\n\nimport { AlertDialog } from \"@base-ui/react/alert-dialog\";\nimport { Combobox as ComboboxPrimitive } from \"@base-ui/react/combobox\";\nimport {\n  Calendar as CalendarIcon,\n  Check,\n  CheckCircle2,\n  Circle,\n  CircleAlert,\n  CircleDashed,\n  CircleDot,\n  Command,\n  Loader2,\n  Plus,\n  Tag as TagIcon,\n  Trash2,\n  Users,\n  X,\n} from \"lucide-react\";\nimport { useActionState, useCallback, useEffect, useId, useState } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport {\n  AlertDialogClose,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogPopup,\n  AlertDialogTitle,\n} from \"@/registry/brook/tailwind/ui/alert-dialog\";\nimport { Button } from \"@/registry/brook/tailwind/ui/button\";\nimport { Calendar } from \"@/registry/brook/tailwind/ui/calendar\";\nimport { Checkbox, CheckboxIndicator } from \"@/registry/brook/tailwind/ui/checkbox\";\nimport { CheckboxGroup } from \"@/registry/brook/tailwind/ui/checkbox-group\";\nimport {\n  Combobox,\n  ComboboxEmpty,\n  ComboboxInput,\n  ComboboxItem,\n  ComboboxList,\n  ComboboxPopup,\n  ComboboxPortal,\n  ComboboxPositioner,\n} from \"@/registry/brook/tailwind/ui/combobox\";\nimport { Dialog, DialogClose, DialogOverlay, DialogPopup, DialogPortal } from \"@/registry/brook/tailwind/ui/dialog\";\nimport { Input } from \"@/registry/brook/tailwind/ui/input\";\nimport { Kbd } from \"@/registry/brook/tailwind/ui/kbd\";\nimport { Popover, PopoverPopup, PopoverTrigger } from \"@/registry/brook/tailwind/ui/popover\";\nimport {\n  Select,\n  SelectItem,\n  SelectItemIndicator,\n  SelectItemText,\n  SelectList,\n  SelectPopup,\n  SelectPortal,\n  SelectPositioner,\n  SelectSpacer,\n  SelectTrigger,\n  SelectValue,\n} from \"@/registry/brook/tailwind/ui/select\";\nimport { formatDateString, parseDateString, PRIORITY_ITEMS, TAG_COLORS, TAG_ITEMS, type Tag } from \"../lib/project\";\nimport type { Assignee, Column, GroupByField, Priority, Subtask } from \"../types\";\n\nconst PRIORITY_CONFIG: Record<Priority, { icon: React.ReactNode; label: string }> = {\n  urgent: { icon: <CircleAlert size={14} />, label: \"Urgent\" },\n  high: { icon: <PriorityBars count={3} />, label: \"High\" },\n  medium: { icon: <PriorityBars count={2} />, label: \"Medium\" },\n  low: { icon: <PriorityBars count={1} />, label: \"Low\" },\n};\n\nconst COLUMN_ICONS: Record<string, React.ReactNode> = {\n  backlog: <CircleDashed size={14} />,\n  todo: <Circle size={14} />,\n  \"in-progress\": <CircleDot size={14} />,\n  done: <CheckCircle2 size={14} />,\n};\n\nfunction PriorityBars({ count }: { count: number }) {\n  return (\n    <svg fill=\"currentColor\" height=\"14\" viewBox=\"0 0 14 14\" width=\"14\">\n      <rect height=\"4\" rx=\"1\" width=\"3\" x=\"1\" y=\"9\" />\n      <rect height=\"7\" opacity={count >= 2 ? 1 : 0.3} rx=\"1\" width=\"3\" x=\"5.5\" y=\"6\" />\n      <rect height=\"10\" opacity={count >= 3 ? 1 : 0.3} rx=\"1\" width=\"3\" x=\"10\" y=\"3\" />\n    </svg>\n  );\n}\n\nfunction TagDot({ tag }: { tag: Tag }) {\n  return <span className=\"h-2 w-2 shrink-0 rounded-full\" style={{ backgroundColor: TAG_COLORS[tag] }} />;\n}\n\ntype FormState =\n  | { status: \"idle\" }\n  | { status: \"submitting\" }\n  | { status: \"error\"; message: string }\n  | { status: \"success\" };\n\nconst initialFormState: FormState = { status: \"idle\" };\n\nasync function submitTaskAction(_prevState: FormState, formData: FormData): Promise<FormState> {\n  await new Promise((resolve) => setTimeout(resolve, 100));\n\n  const title = formData.get(\"title\") as string;\n  if (!title?.trim()) {\n    return { status: \"error\", message: \"Title is required\" };\n  }\n\n  return { status: \"success\" };\n}\n\ntype SubtaskSectionProps = {\n  subtasks: Subtask[];\n  onAddSubtask: () => void;\n  onUpdateSubtask: (id: string, updates: Partial<Subtask>) => void;\n  onRemoveSubtask: (id: string) => void;\n};\n\nfunction SubtaskSection({ subtasks, onAddSubtask, onUpdateSubtask, onRemoveSubtask }: SubtaskSectionProps) {\n  const labelId = useId();\n\n  const handleValueChange = (newValue: string[]) => {\n    const newSet = new Set(newValue);\n    for (const subtask of subtasks) {\n      const shouldBeCompleted = newSet.has(subtask.id);\n      if (subtask.completed !== shouldBeCompleted) {\n        onUpdateSubtask(subtask.id, { completed: shouldBeCompleted });\n      }\n    }\n  };\n\n  return (\n    <div className=\"mt-3 flex flex-col gap-1\">\n      <span className=\"sr-only\" id={labelId}>\n        Subtasks\n      </span>\n      <CheckboxGroup\n        allValues={subtasks.map((s) => s.id)}\n        aria-labelledby={labelId}\n        onValueChange={handleValueChange}\n        value={subtasks.filter((s) => s.completed).map((s) => s.id)}\n      >\n        {subtasks.map((subtask) => (\n          <div className=\"group flex items-center gap-2 rounded-[var(--radius-sm)] py-1\" key={subtask.id}>\n            <Checkbox\n              className={cn(\n                \"flex h-4 w-4 shrink-0 cursor-pointer items-center justify-center rounded-[4px] border-[1.5px] border-muted-foreground bg-transparent p-0 text-muted-foreground\",\n                \"transition-[border-color,background-color,color] duration-150\",\n                \"hover:border-foreground\",\n                \"data-[checked]:border-primary data-[checked]:bg-primary data-[checked]:text-primary-foreground\"\n              )}\n              name={`subtask-${subtask.id}`}\n              value={subtask.id}\n            >\n              <CheckboxIndicator className=\"flex items-center justify-center\">\n                <Check aria-hidden=\"true\" size={12} strokeWidth={3} />\n              </CheckboxIndicator>\n            </Checkbox>\n            <input\n              autoFocus={!subtask.title}\n              className={cn(\n                \"flex-1 border-none bg-transparent py-1 text-foreground text-sm outline-none\",\n                \"placeholder:text-muted-foreground placeholder:opacity-60\",\n                subtask.completed && \"text-muted-foreground line-through\"\n              )}\n              data-completed={subtask.completed}\n              name={`subtask-title-${subtask.id}`}\n              onChange={(e) => onUpdateSubtask(subtask.id, { title: e.target.value })}\n              onKeyDown={(e) => {\n                if (e.key === \"Enter\") {\n                  e.preventDefault();\n                  onAddSubtask();\n                }\n                if (e.key === \"Backspace\" && !subtask.title) {\n                  e.preventDefault();\n                  onRemoveSubtask(subtask.id);\n                }\n              }}\n              placeholder=\"Subtask title...\"\n              value={subtask.title}\n            />\n            <button\n              aria-label=\"Remove subtask\"\n              className=\"flex cursor-pointer items-center justify-center rounded-[var(--radius-sm)] border-none bg-transparent p-1 text-muted-foreground opacity-0 transition-[opacity,color] duration-150 hover:text-destructive group-hover:opacity-100\"\n              onClick={() => onRemoveSubtask(subtask.id)}\n              type=\"button\"\n            >\n              <X aria-hidden=\"true\" size={14} />\n            </button>\n          </div>\n        ))}\n      </CheckboxGroup>\n      <button\n        className=\"flex cursor-pointer items-center gap-2 border-none bg-transparent py-1.5 text-muted-foreground text-sm transition-colors duration-150 hover:text-foreground\"\n        onClick={onAddSubtask}\n        type=\"button\"\n      >\n        <Plus aria-hidden=\"true\" size={14} />\n        <span>Add subtask</span>\n        <Kbd className=\"ml-auto\" size=\"sm\">\n          <Command aria-hidden=\"true\" size={10} />L\n        </Kbd>\n      </button>\n    </div>\n  );\n}\n\nexport type TaskDialogProps = {\n  open: boolean;\n  mode: \"create\" | \"edit\";\n  task?: {\n    title: string;\n    description: string;\n    priority: Priority;\n    columnId: string;\n    tags: string[];\n    assignees?: Assignee[];\n    subtasks?: Subtask[];\n    dueDate?: string;\n  };\n  columnId?: string;\n  assignees: Assignee[];\n  columns: Column[];\n  groupBy: GroupByField;\n  onClose: () => void;\n};\n\nexport function TaskDialog({ open, mode, task, columnId, assignees, columns, groupBy, onClose }: TaskDialogProps) {\n  const [formState, submitAction, isPending] = useActionState(submitTaskAction, initialFormState);\n  const [deleteConfirmOpen, setDeleteConfirmOpen] = useState(false);\n  const [subtasks, setSubtasks] = useState<Subtask[]>(task?.subtasks ?? []);\n  const [dueDate, setDueDate] = useState(task?.dueDate ? task.dueDate.split(\"T\")[0] : \"\");\n\n  const defaultColumnId = columns[0]?.id ?? \"\";\n  const defaultPriority = task?.priority ?? \"medium\";\n  const defaultSelectedColumnId = task?.columnId ?? columnId ?? defaultColumnId;\n  const defaultTags = task?.tags ?? [];\n  const defaultAssignees = task?.assignees ?? [];\n\n  const addSubtask = useCallback(() => {\n    const newSubtask: Subtask = {\n      id: `subtask-${crypto.randomUUID()}`,\n      title: \"\",\n      completed: false,\n    };\n    setSubtasks((prev) => [...prev, newSubtask]);\n  }, []);\n\n  const updateSubtask = useCallback((id: string, updates: Partial<Subtask>) => {\n    setSubtasks((prev) => prev.map((st) => (st.id === id ? { ...st, ...updates } : st)));\n  }, []);\n\n  const removeSubtask = useCallback((id: string) => {\n    setSubtasks((prev) => prev.filter((st) => st.id !== id));\n  }, []);\n\n  const handleKeyDown = useCallback(\n    (e: React.KeyboardEvent) => {\n      if ((e.metaKey || e.ctrlKey) && e.key === \"l\") {\n        e.preventDefault();\n        addSubtask();\n      }\n    },\n    [addSubtask]\n  );\n\n  useEffect(() => {\n    if (formState.status === \"success\") {\n      onClose();\n    }\n  }, [formState.status, onClose]);\n\n  if (!open) {\n    return null;\n  }\n\n  return (\n    <Dialog onOpenChange={(isOpen) => !isOpen && onClose()} open>\n      <DialogPortal>\n        <DialogOverlay />\n        <DialogPopup\n          className=\"max-w-[660px] overflow-visible p-5 transition-all duration-150 data-[nested-dialog-open]:opacity-50 data-[nested-dialog-open]:after:absolute data-[nested-dialog-open]:after:inset-0 data-[nested-dialog-open]:after:rounded-[inherit] data-[nested-dialog-open]:after:bg-background/30 data-[nested-dialog-open]:after:content-['']\"\n          data-kanban-dialog\n          onKeyDown={handleKeyDown}\n        >\n          <form action={submitAction} className=\"mt-0 flex flex-col gap-1\">\n            <input name=\"subtasks\" type=\"hidden\" value={JSON.stringify(subtasks)} />\n            <input name=\"dueDate\" type=\"hidden\" value={dueDate} />\n\n            <Input\n              autoFocus\n              className={cn(\n                \"rounded-none py-2 font-semibold text-xl leading-[1.3] tracking-[-0.01em]\",\n                \"placeholder:font-semibold placeholder:text-muted-foreground placeholder:text-xl placeholder:opacity-60\",\n                \"h-auto border-none bg-transparent p-0 shadow-none\",\n                \"focus:border-transparent focus:shadow-none focus:outline-none\",\n                \"focus-visible:border-transparent focus-visible:shadow-none focus-visible:outline-none\"\n              )}\n              data-variant=\"borderless\"\n              defaultValue={task?.title ?? \"\"}\n              name=\"title\"\n              placeholder={mode === \"create\" ? \"New task...\" : \"Task title...\"}\n            />\n            {formState.status === \"error\" && <p className=\"m-0 text-destructive text-xs\">{formState.message}</p>}\n\n            <Input\n              className={cn(\n                \"min-h-10 rounded-none py-1.5 text-muted-foreground text-sm\",\n                \"placeholder:text-sm placeholder:opacity-70\",\n                \"h-auto border-none bg-transparent p-0 shadow-none\",\n                \"focus:border-transparent focus:shadow-none focus:outline-none\",\n                \"focus-visible:border-transparent focus-visible:shadow-none focus-visible:outline-none\"\n              )}\n              data-variant=\"borderless\"\n              defaultValue={task?.description ?? \"\"}\n              name=\"description\"\n              placeholder=\"Add description...\"\n            />\n\n            <SubtaskSection\n              onAddSubtask={addSubtask}\n              onRemoveSubtask={removeSubtask}\n              onUpdateSubtask={updateSubtask}\n              subtasks={subtasks}\n            />\n\n            <div\n              className={cn(\n                \"mt-4 flex flex-wrap items-center gap-2\",\n                // Trigger styles\n                \"[&_[data-slot=select-trigger]]:shadow-[0_0_0_1px_oklch(from_var(--border)_l_c_h_/_0.4)]\",\n                \"[&_[data-slot=popover-trigger]]:shadow-[0_0_0_1px_oklch(from_var(--border)_l_c_h_/_0.4)]\",\n                \"[&_[data-slot=button]]:shadow-[0_0_0_1px_oklch(from_var(--border)_l_c_h_/_0.4)]\",\n                \"[&_[data-slot=select-trigger]:hover]:bg-accent\",\n                \"[&_[data-slot=popover-trigger]:hover]:bg-accent\",\n                \"[&_[data-slot=button]:hover]:bg-accent\",\n                \"[&_[data-slot=select-trigger][data-popup-open]]:bg-accent\",\n                \"[&_[data-slot=popover-trigger][data-popup-open]]:bg-accent\",\n                \"[&_[data-slot=combobox-trigger][data-popup-open]]:bg-accent\",\n                \"[&_[data-popup-open]]:bg-accent\",\n                // Select popup styles\n                \"[&_[data-slot=select-popup]]:min-w-0\",\n                \"[&_[data-slot=select-popup]]:w-[200px]\",\n                \"[&_[data-slot=select-popup]]:border-[0.5px]\",\n                \"[&_[data-slot=select-popup]]:border-[oklch(from_var(--border)_l_c_h_/_0.4)]\",\n                \"[&_[data-slot=select-popup]]:shadow-[var(--shadow-border-stack)]\",\n                \"[&_[data-slot=select-popup]]:transition-[transform,opacity]\",\n                \"[&_[data-slot=select-popup]]:duration-[250ms]\",\n                \"[&_[data-slot=select-popup]]:ease-[var(--ease-out-expo)]\",\n                \"[&_[data-slot=select-popup][data-starting-style]]:scale-95\",\n                \"[&_[data-slot=select-popup][data-starting-style]]:opacity-0\",\n                \"[&_[data-slot=select-popup][data-ending-style]]:scale-95\",\n                \"[&_[data-slot=select-popup][data-ending-style]]:opacity-0\",\n                // Select list styles\n                \"[&_[data-slot=select-list]]:p-0\",\n                \"[&_[data-slot=select-list]]:scroll-py-6\",\n                // Select item styles\n                \"[&_[data-slot=select-item]]:mx-1\",\n                \"[&_[data-slot=select-item]]:min-h-8\",\n                \"[&_[data-slot=select-item]]:gap-3\",\n                \"[&_[data-slot=select-item]]:px-2\",\n                \"[&_[data-slot=select-item]]:pr-1.5\",\n                // Select indicator styles\n                \"[&_[data-slot=select-item-indicator]]:text-muted-foreground\"\n              )}\n            >\n              <Select defaultValue={defaultPriority} items={PRIORITY_ITEMS} name=\"priority\">\n                <SelectTrigger\n                  className=\"inline-flex items-center gap-2 whitespace-nowrap [&_[data-slot=select-value]]:flex [&_[data-slot=select-value]]:items-center [&_[data-slot=select-value]]:gap-2\"\n                  render={<Button size=\"sm\" variant=\"outline\" />}\n                >\n                  <SelectValue>\n                    {(value) => (\n                      <>\n                        <span\n                          className={cn(\n                            \"flex items-center justify-center text-muted-foreground\",\n                            value === \"urgent\" && \"text-[var(--urgent)]\"\n                          )}\n                        >\n                          {PRIORITY_CONFIG[value as Priority].icon}\n                        </span>\n                        {PRIORITY_CONFIG[value as Priority].label}\n                      </>\n                    )}\n                  </SelectValue>\n                </SelectTrigger>\n                <SelectPortal>\n                  <SelectPositioner align=\"start\" alignItemWithTrigger={false} className=\"min-w-[140px]\" sideOffset={6}>\n                    <SelectPopup>\n                      <SelectSpacer />\n                      <SelectList>\n                        {PRIORITY_ITEMS.map((p) => (\n                          <SelectItem key={p.value} value={p.value}>\n                            <span className=\"flex items-center justify-center text-muted-foreground\">\n                              {PRIORITY_CONFIG[p.value].icon}\n                            </span>\n                            <SelectItemText>{p.label}</SelectItemText>\n                            <SelectItemIndicator />\n                          </SelectItem>\n                        ))}\n                      </SelectList>\n                      <SelectSpacer />\n                    </SelectPopup>\n                  </SelectPositioner>\n                </SelectPortal>\n              </Select>\n\n              {groupBy === \"column\" && (\n                <Select\n                  defaultValue={defaultSelectedColumnId}\n                  items={columns.map((col) => ({ value: col.id, label: col.name }))}\n                  name=\"columnId\"\n                >\n                  <SelectTrigger\n                    className=\"inline-flex items-center gap-2 whitespace-nowrap [&_[data-slot=select-value]]:flex [&_[data-slot=select-value]]:items-center [&_[data-slot=select-value]]:gap-2\"\n                    render={<Button size=\"sm\" variant=\"outline\" />}\n                  >\n                    <SelectValue>\n                      {(value) => {\n                        const col = columns.find((c) => c.id === value);\n                        return (\n                          <>\n                            <span className=\"flex items-center justify-center text-muted-foreground\">\n                              {COLUMN_ICONS[value] ?? <Circle size={14} />}\n                            </span>\n                            {col?.name ?? \"Select column\"}\n                          </>\n                        );\n                      }}\n                    </SelectValue>\n                  </SelectTrigger>\n                  <SelectPortal>\n                    <SelectPositioner\n                      align=\"start\"\n                      alignItemWithTrigger={false}\n                      className=\"min-w-[160px]\"\n                      sideOffset={6}\n                    >\n                      <SelectPopup>\n                        <SelectSpacer />\n                        <SelectList>\n                          {columns.map((col) => (\n                            <SelectItem key={col.id} value={col.id}>\n                              <span className=\"flex items-center justify-center text-muted-foreground\">\n                                {COLUMN_ICONS[col.id] ?? <Circle size={14} />}\n                              </span>\n                              <SelectItemText>{col.name}</SelectItemText>\n                              <SelectItemIndicator />\n                            </SelectItem>\n                          ))}\n                        </SelectList>\n                        <SelectSpacer />\n                      </SelectPopup>\n                    </SelectPositioner>\n                  </SelectPortal>\n                </Select>\n              )}\n\n              <Select<string, true> defaultValue={defaultTags} multiple name=\"tags\">\n                <SelectTrigger\n                  className=\"inline-flex items-center gap-2 whitespace-nowrap\"\n                  render={<Button size=\"sm\" variant=\"outline\" />}\n                >\n                  <span className=\"flex items-center justify-center text-muted-foreground\">\n                    <TagIcon size={14} />\n                  </span>\n                  <SelectValue>\n                    {(value) =>\n                      Array.isArray(value) && value.length > 0 ? (\n                        <div className=\"flex items-center [&_.tag-chip:not(:first-child)]:-ml-[3px]\">\n                          {value.map((tag) => (\n                            <span\n                              className=\"tag-chip h-2 w-2 shrink-0 rounded-full\"\n                              key={tag}\n                              style={{ backgroundColor: TAG_COLORS[tag as Tag] }}\n                            />\n                          ))}\n                        </div>\n                      ) : (\n                        \"Tags\"\n                      )\n                    }\n                  </SelectValue>\n                </SelectTrigger>\n                <SelectPortal>\n                  <SelectPositioner align=\"start\" alignItemWithTrigger={false} className=\"min-w-[130px]\" sideOffset={6}>\n                    <SelectPopup>\n                      <SelectSpacer />\n                      <SelectList>\n                        {TAG_ITEMS.map((item) => (\n                          <SelectItem key={item.value} value={item.value}>\n                            <TagDot tag={item.value as Tag} />\n                            <SelectItemText>{item.label}</SelectItemText>\n                            <SelectItemIndicator />\n                          </SelectItem>\n                        ))}\n                      </SelectList>\n                      <SelectSpacer />\n                    </SelectPopup>\n                  </SelectPositioner>\n                </SelectPortal>\n              </Select>\n\n              <Combobox<Assignee, true> defaultValue={defaultAssignees} items={assignees} multiple name=\"assignees\">\n                <ComboboxPrimitive.Trigger\n                  render={\n                    <Button\n                      className=\"inline-flex items-center gap-2 whitespace-nowrap\"\n                      size=\"sm\"\n                      variant=\"outline\"\n                    />\n                  }\n                >\n                  <span className=\"flex items-center justify-center text-muted-foreground\">\n                    <Users size={14} />\n                  </span>\n                  <ComboboxPrimitive.Value>\n                    {(value) =>\n                      Array.isArray(value) && value.length > 0\n                        ? `${value.length} assignee${value.length > 1 ? \"s\" : \"\"}`\n                        : \"Assignees\"\n                    }\n                  </ComboboxPrimitive.Value>\n                </ComboboxPrimitive.Trigger>\n                <ComboboxPortal>\n                  <ComboboxPositioner side=\"bottom\" sideOffset={6}>\n                    <ComboboxPopup className=\"w-auto min-w-[200px] border-[0.5px] border-[oklch(from_var(--border)_l_c_h_/_0.4)] shadow-[var(--shadow-border-stack)]\">\n                      <ComboboxInput\n                        className=\"mb-1 min-h-8 w-full rounded-none border-solid border-t-0 border-x-0 border-b-[0.5px] border-b-[oklch(from_var(--border)_l_c_h_/_0.8)] bg-transparent pl-3 pr-2.5 text-xs !shadow-none focus:outline-none focus:!shadow-none focus:ring-0 focus-visible:outline-none focus-visible:!shadow-none focus-visible:ring-0\"\n                        placeholder=\"Search assignees...\"\n                      />\n                      <ComboboxEmpty>No users found</ComboboxEmpty>\n                      <ComboboxList>\n                        {(assignee: Assignee) => (\n                          <ComboboxItem indicatorPosition=\"right\" key={assignee.id} value={assignee}>\n                            <span style={{ flex: 1 }}>{assignee.name}</span>\n                          </ComboboxItem>\n                        )}\n                      </ComboboxList>\n                    </ComboboxPopup>\n                  </ComboboxPositioner>\n                </ComboboxPortal>\n              </Combobox>\n\n              <Popover>\n                <PopoverTrigger\n                  className=\"inline-flex items-center gap-2\"\n                  render={<Button size=\"sm\" variant=\"outline\" />}\n                >\n                  <span className=\"flex items-center justify-center text-muted-foreground\">\n                    <CalendarIcon size={14} />\n                  </span>\n                  {dueDate ? parseDateString(dueDate).toLocaleDateString() : \"Due date\"}\n                </PopoverTrigger>\n                <PopoverPopup align=\"start\" arrow={false} className=\"z-[200]\" sideOffset={6}>\n                  <Calendar\n                    className=\"bg-transparent p-0\"\n                    mode=\"single\"\n                    onSelect={(date) => {\n                      setDueDate(date ? formatDateString(date) : \"\");\n                    }}\n                    selected={dueDate.length > 0 ? parseDateString(dueDate) : undefined}\n                  />\n                </PopoverPopup>\n              </Popover>\n            </div>\n\n            <div className=\"-mx-5 mt-6 flex items-center justify-between gap-2 border-t-[0.5px] border-t-[oklch(from_var(--border)_l_c_h_/_0.4)] px-5 pt-4\">\n              {mode === \"edit\" && (\n                <Button\n                  className=\"text-muted-foreground hover:border-destructive hover:bg-destructive hover:text-destructive-foreground\"\n                  onClick={() => setDeleteConfirmOpen(true)}\n                  size=\"sm\"\n                  type=\"button\"\n                  variant=\"outline\"\n                >\n                  Delete\n                </Button>\n              )}\n              <div className=\"ml-auto flex items-center gap-1.5\">\n                <Button disabled={isPending} size=\"sm\" type=\"submit\">\n                  {mode === \"create\" ? \"Create\" : \"Save\"}\n                  {isPending && <Loader2 aria-hidden=\"true\" className=\"animate-spin\" size={14} />}\n                </Button>\n              </div>\n            </div>\n          </form>\n\n          <DialogClose\n            aria-label=\"Close dialog\"\n            className=\"absolute top-3 right-3 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border-none bg-transparent opacity-50 transition-opacity duration-150 hover:opacity-100\"\n          >\n            <X aria-hidden=\"true\" size={16} />\n          </DialogClose>\n        </DialogPopup>\n      </DialogPortal>\n\n      <AlertDialog.Root onOpenChange={setDeleteConfirmOpen} open={deleteConfirmOpen}>\n        <AlertDialogPopup className=\"flex !w-auto max-w-[400px] flex-col items-center gap-2\">\n          <div className=\"mx-auto mb-3 flex h-16 w-16 items-center justify-center rounded-lg bg-destructive/15\">\n            <Trash2 className=\"text-destructive\" size={28} />\n          </div>\n          <AlertDialogTitle className=\"text-center font-medium text-base\">Delete task?</AlertDialogTitle>\n          <AlertDialogDescription className=\"text-center text-base\">\n            This action cannot be undone.\n          </AlertDialogDescription>\n          <AlertDialogFooter className=\"mt-4 flex w-full flex-row gap-3\">\n            <AlertDialogClose render={<Button className=\"flex-1\" variant=\"outline\" />}>Cancel</AlertDialogClose>\n            <AlertDialogClose render={<Button className=\"flex-1\" variant=\"destructive\" />}>Delete</AlertDialogClose>\n          </AlertDialogFooter>\n        </AlertDialogPopup>\n      </AlertDialog.Root>\n    </Dialog>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/task-dialog.tsx"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/components/delete-dialog.tsx",
      "content": "\"use client\";\n\nimport { Trash2 } from \"lucide-react\";\nimport {\n  AlertDialog,\n  AlertDialogClose,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogTitle,\n} from \"@/registry/brook/tailwind/ui/alert-dialog\";\nimport { Button } from \"@/registry/brook/tailwind/ui/button\";\n\nexport type DeleteDialogProps = {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n};\n\nexport function DeleteDialog({ open, onOpenChange }: DeleteDialogProps) {\n  return (\n    <AlertDialog onOpenChange={onOpenChange} open={open}>\n      <AlertDialogContent className=\"flex max-w-[400px] flex-col items-center gap-2\">\n        <div className=\"mb-3 flex size-16 items-center justify-center rounded-lg bg-destructive/15\">\n          <Trash2 className=\"text-destructive\" size={28} />\n        </div>\n        <AlertDialogTitle className=\"text-center font-medium text-base\">Delete task?</AlertDialogTitle>\n        <AlertDialogDescription className=\"text-center text-base\">This action cannot be undone.</AlertDialogDescription>\n        <AlertDialogFooter className=\"mt-4 flex w-full flex-row gap-3\">\n          <AlertDialogClose render={<Button className=\"flex-1\" variant=\"outline\" />}>Cancel</AlertDialogClose>\n          <AlertDialogClose render={<Button className=\"flex-1\" variant=\"destructive\" />}>Delete</AlertDialogClose>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/delete-dialog.tsx"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/components/filter-bar.tsx",
      "content": "\"use client\";\n\nimport { Check, Filter, Layers, X } from \"lucide-react\";\nimport { useMemo } from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { Badge } from \"@/registry/brook/tailwind/ui/badge\";\nimport { Button } from \"@/registry/brook/tailwind/ui/button\";\nimport {\n  DropdownMenu,\n  DropdownMenuCheckboxItem,\n  DropdownMenuCheckboxItemIndicator,\n  DropdownMenuGroup,\n  DropdownMenuGroupLabel,\n  DropdownMenuPopup,\n  DropdownMenuPortal,\n  DropdownMenuPositioner,\n  DropdownMenuRadioGroup,\n  DropdownMenuRadioItem,\n  DropdownMenuRadioItemIndicator,\n  DropdownMenuSeparator,\n  DropdownMenuSpacer,\n  DropdownMenuTrigger,\n} from \"@/registry/brook/tailwind/ui/dropdown-menu\";\nimport { capitalize, GROUP_BY_ITEMS, PRIORITY_ITEMS, TAG_ITEMS } from \"../lib/project\";\nimport type { FilterConfig, GroupByField, Priority } from \"../types\";\n\nfunction CheckIcon() {\n  return <Check size={12} />;\n}\n\nexport type FilterBarProps = {\n  className?: string;\n  filters: FilterConfig;\n  groupBy: GroupByField;\n  onTogglePriority: (priority: Priority, checked: boolean) => void;\n  onToggleTag: (tag: string, checked: boolean) => void;\n  onGroupByChange: (groupBy: GroupByField) => void;\n};\n\nexport function FilterBar({\n  className,\n  filters,\n  groupBy,\n  onTogglePriority,\n  onToggleTag,\n  onGroupByChange,\n}: FilterBarProps) {\n  const activeFilterCount = useMemo(\n    () => filters.priority.length + filters.tags.length,\n    [filters.priority.length, filters.tags.length]\n  );\n\n  const currentGroupByLabel = useMemo(\n    () => GROUP_BY_ITEMS.find((item) => item.value === groupBy)?.label ?? \"Group by\",\n    [groupBy]\n  );\n\n  const prioritySet = useMemo(() => new Set(filters.priority), [filters.priority]);\n  const tagSet = useMemo(() => new Set(filters.tags), [filters.tags]);\n\n  return (\n    <div className={cn(\"flex flex-col gap-2 px-4 py-3\", className)} data-slot=\"filter-bar\">\n      <div className=\"flex items-center gap-2\">\n        {/* Filter Menu */}\n        <DropdownMenu>\n          <DropdownMenuTrigger\n            render={\n              <Button size=\"sm\" variant=\"outline\">\n                <Filter className=\"text-muted-foreground\" size={14} />\n                Filters\n                {activeFilterCount > 0 && (\n                  <Badge size=\"sm\" variant=\"secondary\">\n                    {activeFilterCount}\n                  </Badge>\n                )}\n              </Button>\n            }\n          />\n          <DropdownMenuPortal>\n            <DropdownMenuPositioner align=\"start\" side=\"bottom\" sideOffset={4}>\n              <DropdownMenuPopup>\n                <DropdownMenuSpacer />\n\n                <DropdownMenuGroup>\n                  <DropdownMenuGroupLabel>Priority</DropdownMenuGroupLabel>\n                  {PRIORITY_ITEMS.map((item) => (\n                    <DropdownMenuCheckboxItem\n                      checked={prioritySet.has(item.value)}\n                      key={item.value}\n                      onCheckedChange={(checked) => onTogglePriority(item.value, checked)}\n                    >\n                      <span>{item.label}</span>\n                      <DropdownMenuCheckboxItemIndicator>\n                        <CheckIcon />\n                      </DropdownMenuCheckboxItemIndicator>\n                    </DropdownMenuCheckboxItem>\n                  ))}\n                </DropdownMenuGroup>\n\n                <DropdownMenuSeparator />\n\n                <DropdownMenuGroup>\n                  <DropdownMenuGroupLabel>Tags</DropdownMenuGroupLabel>\n                  {TAG_ITEMS.map((item) => (\n                    <DropdownMenuCheckboxItem\n                      checked={tagSet.has(item.value)}\n                      key={item.value}\n                      onCheckedChange={(checked) => onToggleTag(item.value, checked)}\n                    >\n                      <span>{item.label}</span>\n                      <DropdownMenuCheckboxItemIndicator>\n                        <CheckIcon />\n                      </DropdownMenuCheckboxItemIndicator>\n                    </DropdownMenuCheckboxItem>\n                  ))}\n                </DropdownMenuGroup>\n\n                <DropdownMenuSpacer />\n              </DropdownMenuPopup>\n            </DropdownMenuPositioner>\n          </DropdownMenuPortal>\n        </DropdownMenu>\n\n        {/* Group By Menu */}\n        <DropdownMenu>\n          <DropdownMenuTrigger\n            render={\n              <Button size=\"sm\" variant=\"outline\">\n                <Layers className=\"text-muted-foreground\" size={14} />\n                {currentGroupByLabel}\n              </Button>\n            }\n          />\n          <DropdownMenuPortal>\n            <DropdownMenuPositioner align=\"start\" side=\"bottom\" sideOffset={4}>\n              <DropdownMenuPopup>\n                <DropdownMenuSpacer />\n\n                <DropdownMenuGroup>\n                  <DropdownMenuGroupLabel>Group by</DropdownMenuGroupLabel>\n                  <DropdownMenuRadioGroup\n                    onValueChange={(value) => onGroupByChange(value as GroupByField)}\n                    value={groupBy}\n                  >\n                    {GROUP_BY_ITEMS.map((item) => (\n                      <DropdownMenuRadioItem key={item.value} value={item.value}>\n                        {item.label}\n                        <DropdownMenuRadioItemIndicator>\n                          <CheckIcon />\n                        </DropdownMenuRadioItemIndicator>\n                      </DropdownMenuRadioItem>\n                    ))}\n                  </DropdownMenuRadioGroup>\n                </DropdownMenuGroup>\n\n                <DropdownMenuSpacer />\n              </DropdownMenuPopup>\n            </DropdownMenuPositioner>\n          </DropdownMenuPortal>\n        </DropdownMenu>\n      </div>\n    </div>\n  );\n}\n\nexport type ActiveFiltersProps = {\n  className?: string;\n  filters: FilterConfig;\n  onRemovePriority: (priority: Priority) => void;\n  onRemoveTag: (tag: string) => void;\n};\n\nexport function ActiveFilters({ className, filters, onRemovePriority, onRemoveTag }: ActiveFiltersProps) {\n  const hasActiveFilters = filters.priority.length > 0 || filters.tags.length > 0;\n\n  if (!hasActiveFilters) {\n    return null;\n  }\n\n  return (\n    <div className={cn(\"flex flex-wrap gap-2\", className)} data-slot=\"active-filters\">\n      {filters.priority.map((p) => (\n        <Badge className=\"flex items-center gap-1\" key={p} variant=\"secondary\">\n          {capitalize(p)}\n          <button\n            aria-label={`Remove ${capitalize(p)} priority filter`}\n            className=\"flex cursor-pointer items-center justify-center rounded-full border-0 bg-transparent p-0 opacity-70 transition-opacity duration-150 hover:opacity-100\"\n            onClick={() => onRemovePriority(p)}\n            type=\"button\"\n          >\n            <X aria-hidden=\"true\" size={12} />\n          </button>\n        </Badge>\n      ))}\n      {filters.tags.map((tag) => (\n        <Badge className=\"flex items-center gap-1\" key={tag} variant=\"secondary\">\n          {capitalize(tag)}\n          <button\n            aria-label={`Remove ${capitalize(tag)} tag filter`}\n            className=\"flex cursor-pointer items-center justify-center rounded-full border-0 bg-transparent p-0 opacity-70 transition-opacity duration-150 hover:opacity-100\"\n            onClick={() => onRemoveTag(tag)}\n            type=\"button\"\n          >\n            <X aria-hidden=\"true\" size={12} />\n          </button>\n        </Badge>\n      ))}\n    </div>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/filter-bar.tsx"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/components/priority-icon.tsx",
      "content": "import { CircleAlert } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport type { Priority } from \"../types\";\n\ntype PriorityIconProps = {\n  priority: Priority;\n  className?: string;\n};\n\nexport function PriorityIcon({ priority, className }: PriorityIconProps) {\n  if (priority === \"urgent\") {\n    return (\n      <span\n        aria-label=\"Urgent priority\"\n        className={cn(\n          \"flex h-6 w-6 shrink-0 items-center justify-center rounded-[calc(var(--radius)-2px)] bg-transparent shadow-[inset_0_0_0_1px_var(--border-subtle-light)]\",\n          className\n        )}\n        role=\"img\"\n      >\n        <CircleAlert aria-hidden=\"true\" className=\"text-[var(--urgent)]\" size={14} />\n      </span>\n    );\n  }\n\n  const barCount = priority === \"low\" ? 1 : priority === \"medium\" ? 2 : 3;\n  const label = `${priority.charAt(0).toUpperCase() + priority.slice(1)} priority`;\n\n  return (\n    <span\n      aria-label={label}\n      className={cn(\n        \"flex h-6 w-6 shrink-0 items-center justify-center rounded-[calc(var(--radius)-2px)] bg-transparent shadow-[inset_0_0_0_1px_var(--border-subtle-light)]\",\n        className\n      )}\n      role=\"img\"\n    >\n      <svg\n        aria-hidden=\"true\"\n        className=\"text-muted-foreground\"\n        fill=\"currentColor\"\n        height=\"14\"\n        viewBox=\"0 0 14 14\"\n        width=\"14\"\n      >\n        {/* Bar 1 - always active */}\n        <rect height=\"4\" rx=\"1\" width=\"3\" x=\"1\" y=\"9\" />\n        {/* Bar 2 */}\n        <rect\n          className={barCount < 2 ? \"fill-[oklch(from_var(--muted-foreground)_l_c_h_/_0.3)]\" : undefined}\n          height=\"7\"\n          rx=\"1\"\n          width=\"3\"\n          x=\"5.5\"\n          y=\"6\"\n        />\n        {/* Bar 3 */}\n        <rect\n          className={barCount < 3 ? \"fill-[oklch(from_var(--muted-foreground)_l_c_h_/_0.3)]\" : undefined}\n          height=\"10\"\n          rx=\"1\"\n          width=\"3\"\n          x=\"10\"\n          y=\"3\"\n        />\n      </svg>\n    </span>\n  );\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/priority-icon.tsx"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/hooks/use-kanban-dnd.ts",
      "content": "\"use client\";\n\nimport type { Announcements } from \"@dnd-kit/core\";\nimport {\n  type DragEndEvent,\n  type DragOverEvent,\n  type DragStartEvent,\n  KeyboardSensor,\n  MouseSensor,\n  TouchSensor,\n  useSensor,\n  useSensors,\n} from \"@dnd-kit/core\";\nimport { arrayMove, sortableKeyboardCoordinates } from \"@dnd-kit/sortable\";\nimport { useCallback, useMemo, useRef, useState } from \"react\";\nimport { getColumnName, getTargetColumnId } from \"../lib/project\";\n\nexport type KanbanItemProps = {\n  id: string;\n  columnId: string;\n} & Record<string, unknown>;\n\nexport type KanbanColumnDataProps = {\n  id: string;\n  name: string;\n} & Record<string, unknown>;\n\nfunction getItemGroupId<T extends KanbanItemProps>(item: T): string {\n  return item.columnId;\n}\n\nfunction applyGroupChange<T extends KanbanItemProps>(item: T, groupId: string): T {\n  return { ...item, columnId: groupId };\n}\n\nfunction getOverGroupId<T extends KanbanItemProps, C extends KanbanColumnDataProps>(\n  overId: string,\n  data: T[],\n  columns: C[]\n): string | null {\n  const overItem = data.find((item) => item.id === overId);\n  if (overItem) {\n    return getItemGroupId(overItem);\n  }\n\n  const isOverColumn = columns.some((col) => col.id === overId);\n  if (isOverColumn) {\n    return overId;\n  }\n\n  return null;\n}\n\nfunction getCrossGroupInsertIndex<T extends KanbanItemProps, C extends KanbanColumnDataProps>(\n  overId: string,\n  data: T[],\n  columns: C[],\n  targetGroupId: string,\n  activeIndex: number\n): number {\n  const isOverColumn = columns.some((col) => col.id === overId);\n\n  if (isOverColumn) {\n    const itemsInColumn = data.filter((item) => getItemGroupId(item) === targetGroupId);\n    if (itemsInColumn.length > 0) {\n      const lastItemInColumn = itemsInColumn[itemsInColumn.length - 1];\n      const lastItemIndex = data.findIndex((item) => item.id === lastItemInColumn.id);\n      if (activeIndex < lastItemIndex) {\n        return lastItemIndex;\n      }\n      return lastItemIndex + 1;\n    }\n    return data.length;\n  }\n\n  const overIndex = data.findIndex((item) => item.id === overId);\n  if (overIndex === -1) {\n    return data.length;\n  }\n\n  if (activeIndex < overIndex) {\n    return overIndex - 1;\n  }\n  return overIndex;\n}\n\ntype UseKanbanDndOptions<\n  T extends KanbanItemProps = KanbanItemProps,\n  C extends KanbanColumnDataProps = KanbanColumnDataProps,\n> = {\n  data: T[];\n  columns: C[];\n  enabled: boolean;\n  onDataChange: (data: T[]) => void;\n  onDragStart?: (event: DragStartEvent) => void;\n  onDragEnd?: (event: DragEndEvent) => void;\n  onDragOver?: (event: DragOverEvent) => void;\n};\n\nexport function useKanbanDnd<\n  T extends KanbanItemProps = KanbanItemProps,\n  C extends KanbanColumnDataProps = KanbanColumnDataProps,\n>({ data, columns, enabled, onDataChange, onDragStart, onDragEnd, onDragOver }: UseKanbanDndOptions<T, C>) {\n  const [activeItemId, setActiveItemId] = useState<string | null>(null);\n  const lastCrossGroupMoveRef = useRef<string | null>(null);\n  const isUpdatingRef = useRef(false);\n\n  const activeItem = useMemo(() => data.find((item) => item.id === activeItemId) ?? null, [data, activeItemId]);\n\n  const sensors = useSensors(\n    useSensor(MouseSensor, {\n      activationConstraint: { distance: 8 },\n    }),\n    useSensor(TouchSensor, {\n      activationConstraint: { delay: 200, tolerance: 5 },\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    })\n  );\n\n  const handleDragStart = useCallback(\n    (event: DragStartEvent) => {\n      const activeId = event.active.id as string;\n      setActiveItemId(activeId);\n      lastCrossGroupMoveRef.current = null;\n      isUpdatingRef.current = false;\n      onDragStart?.(event);\n    },\n    [onDragStart]\n  );\n\n  const handleDragOver = useCallback(\n    (event: DragOverEvent) => {\n      if (isUpdatingRef.current) {\n        return;\n      }\n\n      const { over } = event;\n\n      if (enabled && over) {\n        const activeId = event.active.id as string;\n        const overId = over.id as string;\n        const draggedItem = data.find((item) => item.id === activeId);\n\n        if (draggedItem) {\n          const overGroupId = getOverGroupId(overId, data, columns);\n          const draggedGroupId = getItemGroupId(draggedItem);\n\n          if (overGroupId && draggedGroupId !== overGroupId) {\n            const moveKey = `${activeId}:${overGroupId}`;\n            if (lastCrossGroupMoveRef.current === moveKey) {\n              return;\n            }\n            lastCrossGroupMoveRef.current = moveKey;\n            isUpdatingRef.current = true;\n\n            const newData = [...data];\n            const activeIndex = newData.findIndex((item) => item.id === activeId);\n            const finalIndex = getCrossGroupInsertIndex(overId, data, columns, overGroupId, activeIndex);\n\n            newData[activeIndex] = applyGroupChange(newData[activeIndex], overGroupId);\n\n            onDataChange(arrayMove(newData, activeIndex, finalIndex));\n\n            queueMicrotask(() => {\n              isUpdatingRef.current = false;\n            });\n            return;\n          }\n        }\n      }\n\n      onDragOver?.(event);\n    },\n    [data, columns, enabled, onDataChange, onDragOver]\n  );\n\n  const handleDragEnd = useCallback(\n    (event: DragEndEvent) => {\n      const { active, over } = event;\n\n      setActiveItemId(null);\n      lastCrossGroupMoveRef.current = null;\n      isUpdatingRef.current = false;\n      onDragEnd?.(event);\n\n      if (!over || active.id === over.id) {\n        return;\n      }\n\n      const oldIndex = data.findIndex((item) => item.id === active.id);\n      const newIndex = data.findIndex((item) => item.id === over.id);\n\n      if (oldIndex === -1 || newIndex === -1) {\n        return;\n      }\n\n      onDataChange(arrayMove(data, oldIndex, newIndex));\n    },\n    [data, onDataChange, onDragEnd]\n  );\n\n  const announcements: Announcements = useMemo(\n    () => ({\n      onDragStart({ active }) {\n        const item = data.find((i) => i.id === active.id);\n        if (!item) {\n          return \"\";\n        }\n        const columnName = getColumnName(item.columnId, columns);\n        return `Picked up item \"${(item as { title?: string }).title ?? item.id}\" from the \"${columnName}\" column`;\n      },\n      onDragOver({ active, over }) {\n        const item = data.find((i) => i.id === active.id);\n        if (!(item && over)) {\n          return \"\";\n        }\n        const targetColumnId = getTargetColumnId(over.id as string, data, columns);\n        const columnName = getColumnName(targetColumnId ?? \"\", columns);\n        return `Dragged item \"${(item as { title?: string }).title ?? item.id}\" over the \"${columnName}\" column`;\n      },\n      onDragEnd({ active, over }) {\n        const item = data.find((i) => i.id === active.id);\n        if (!(item && over)) {\n          return \"\";\n        }\n        const targetColumnId = getTargetColumnId(over.id as string, data, columns);\n        const columnName = getColumnName(targetColumnId ?? \"\", columns);\n        return `Dropped item \"${(item as { title?: string }).title ?? item.id}\" into the \"${columnName}\" column`;\n      },\n      onDragCancel({ active }) {\n        const item = data.find((i) => i.id === active.id);\n        if (!item) {\n          return \"\";\n        }\n        return `Cancelled dragging item \"${(item as { title?: string }).title ?? item.id}\"`;\n      },\n    }),\n    [data, columns]\n  );\n\n  return {\n    activeItem,\n    sensors,\n    announcements,\n    handleDragStart: enabled ? handleDragStart : undefined,\n    handleDragOver: enabled ? handleDragOver : undefined,\n    handleDragEnd: enabled ? handleDragEnd : undefined,\n  };\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/use-kanban-dnd.ts"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/hooks/use-task-dialog.ts",
      "content": "\"use client\";\n\nimport { useCallback, useState } from \"react\";\nimport type { Task } from \"../types\";\n\nexport type DialogState =\n  | { mode: \"closed\" }\n  | { mode: \"create\"; columnId: string }\n  | { mode: \"edit\"; task: Task }\n  | { mode: \"delete\"; task: Task };\n\nexport function useTaskDialog() {\n  const [dialogState, setDialogState] = useState<DialogState>({ mode: \"closed\" });\n\n  const openCreate = useCallback((columnId: string) => {\n    setDialogState({ mode: \"create\", columnId });\n  }, []);\n\n  const openEdit = useCallback((task: Task) => {\n    setDialogState({ mode: \"edit\", task });\n  }, []);\n\n  const openDelete = useCallback((task: Task) => {\n    setDialogState({ mode: \"delete\", task });\n  }, []);\n\n  const close = useCallback(() => {\n    setDialogState({ mode: \"closed\" });\n  }, []);\n\n  return {\n    dialogState,\n    openCreate,\n    openEdit,\n    openDelete,\n    close,\n    isOpen: dialogState.mode !== \"closed\",\n  };\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/use-task-dialog.ts"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/lib/project.ts",
      "content": "import type { Priority } from \"../types\";\n\nexport const AVAILABLE_TAGS = [\"bug\", \"feature\"] as const;\nexport type Tag = (typeof AVAILABLE_TAGS)[number];\n\nexport const TAG_COLORS: Record<Tag, string> = {\n  bug: \"var(--destructive)\",\n  feature: \"var(--info)\",\n};\n\nexport const PRIORITY_ITEMS: { value: Priority; label: string }[] = [\n  { value: \"urgent\", label: \"Urgent\" },\n  { value: \"high\", label: \"High\" },\n  { value: \"medium\", label: \"Medium\" },\n  { value: \"low\", label: \"Low\" },\n];\n\nexport const TAG_ITEMS = AVAILABLE_TAGS.map((tag) => ({\n  value: tag,\n  label: capitalize(tag),\n}));\n\nexport const GROUP_BY_ITEMS: { value: string; label: string }[] = [\n  { value: \"column\", label: \"Status\" },\n  { value: \"priority\", label: \"Priority\" },\n  { value: \"tag\", label: \"Tag\" },\n];\n\nexport function capitalize(str: string): string {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport function cn(...classes: (string | undefined | null | false)[]): string {\n  return classes.filter(Boolean).join(\" \");\n}\n\nexport function getTasksForColumn<T extends { id: string; columnId: string }>(items: T[], columnId: string): T[] {\n  return items.filter((item) => item.columnId === columnId);\n}\n\nexport function getTargetColumnId<T extends { id: string; columnId: string }, C extends { id: string }>(\n  overId: string,\n  items: T[],\n  columns: C[]\n): string | null {\n  const isOverColumn = columns.some((col) => col.id === overId);\n  if (isOverColumn) {\n    return overId;\n  }\n  const overItem = items.find((item) => item.id === overId);\n  return overItem?.columnId ?? null;\n}\n\nexport function getColumnName<C extends { id: string; name: string }>(columnId: string, columns: C[]): string {\n  const column = columns.find((col) => col.id === columnId);\n  return column?.name ?? columnId;\n}\n\nexport function parseDateString(dateStr: string): Date {\n  const [year, month, day] = dateStr.split(\"-\").map(Number);\n  return new Date(year, month - 1, day, 12, 0, 0);\n}\n\nexport function formatDateString(date: Date): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, \"0\");\n  const day = String(date.getDate()).padStart(2, \"0\");\n  return `${year}-${month}-${day}`;\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/project.ts"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/types/index.ts",
      "content": "export type Priority = \"low\" | \"medium\" | \"high\" | \"urgent\";\n\nexport type Assignee = {\n  id: string;\n  name: string;\n  avatar?: string;\n};\n\nexport type Subtask = {\n  id: string;\n  title: string;\n  completed: boolean;\n};\n\nexport type Task = {\n  id: string;\n  title: string;\n  description: string;\n  columnId: string;\n  priority: Priority;\n  tags: string[];\n  assignees?: Assignee[];\n  subtasks?: Subtask[];\n  dueDate?: string;\n  createdAt: string;\n};\n\nexport type Column = {\n  id: string;\n  name: string;\n  order: number;\n};\n\nexport type FilterConfig = {\n  priority: Priority[];\n  tags: string[];\n};\n\nexport type GroupByField = \"column\" | \"priority\" | \"tag\";\n\nexport type KanbanData = {\n  tasks: Task[];\n  columns: Column[];\n  teamMembers: Assignee[];\n};\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/types.ts"
    },
    {
      "path": "registry/brook/tailwind/blocks/kanban-board/data.json",
      "content": "{\n  \"columns\": [\n    { \"id\": \"backlog\", \"name\": \"Backlog\", \"order\": 0 },\n    { \"id\": \"todo\", \"name\": \"To Do\", \"order\": 1 },\n    { \"id\": \"in-progress\", \"name\": \"In Progress\", \"order\": 2 },\n    { \"id\": \"done\", \"name\": \"Done\", \"order\": 3 }\n  ],\n  \"assignees\": [\n    { \"id\": \"user-1\", \"name\": \"Emma Wilson\" },\n    { \"id\": \"user-2\", \"name\": \"James Chen\" },\n    { \"id\": \"user-3\", \"name\": \"Sofia Garcia\" },\n    { \"id\": \"user-4\", \"name\": \"Marcus Johnson\" },\n    { \"id\": \"user-5\", \"name\": \"Aisha Patel\" },\n    { \"id\": \"user-6\", \"name\": \"Oliver Brown\" },\n    { \"id\": \"user-7\", \"name\": \"Isabella Martinez\" },\n    { \"id\": \"user-8\", \"name\": \"William Taylor\" },\n    { \"id\": \"user-9\", \"name\": \"Mia Anderson\" },\n    { \"id\": \"user-10\", \"name\": \"Benjamin Lee\" }\n  ],\n  \"tasks\": [\n    {\n      \"id\": \"card-1\",\n      \"title\": \"Research competitor products\",\n      \"description\": \"Analyze top 5 competitors and document their key features and pricing strategies.\",\n      \"columnId\": \"todo\",\n      \"priority\": \"high\",\n      \"tags\": [\"feature\"],\n      \"assignees\": [\n        { \"id\": \"user-1\", \"name\": \"Emma Wilson\" },\n        { \"id\": \"user-2\", \"name\": \"James Chen\" },\n        { \"id\": \"user-3\", \"name\": \"Sofia Garcia\" }\n      ],\n      \"subtasks\": [\n        {\n          \"id\": \"subtask-1-1\",\n          \"title\": \"Identify top 5 competitors\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-1-2\",\n          \"title\": \"Document pricing strategies\",\n          \"completed\": false\n        },\n        {\n          \"id\": \"subtask-1-3\",\n          \"title\": \"Create comparison spreadsheet\",\n          \"completed\": false\n        }\n      ],\n      \"dueDate\": \"2025-12-18T00:00:00.000Z\",\n      \"createdAt\": \"2024-01-01T00:00:00.000Z\"\n    },\n    {\n      \"id\": \"card-2\",\n      \"title\": \"Design system foundations\",\n      \"description\": \"Create color palette, typography scale, and spacing tokens for the design system.\",\n      \"columnId\": \"in-progress\",\n      \"priority\": \"medium\",\n      \"tags\": [\"feature\"],\n      \"assignees\": [\n        { \"id\": \"user-3\", \"name\": \"Sofia Garcia\" },\n        { \"id\": \"user-4\", \"name\": \"Marcus Johnson\" }\n      ],\n      \"subtasks\": [\n        {\n          \"id\": \"subtask-2-1\",\n          \"title\": \"Define color palette\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-2-2\",\n          \"title\": \"Create typography scale\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-2-3\",\n          \"title\": \"Define spacing tokens\",\n          \"completed\": false\n        }\n      ],\n      \"dueDate\": \"2025-12-20T00:00:00.000Z\",\n      \"createdAt\": \"2024-01-02T00:00:00.000Z\"\n    },\n    {\n      \"id\": \"card-3\",\n      \"title\": \"Set up CI/CD pipeline\",\n      \"description\": \"Configure GitHub Actions for automated testing and deployment to staging environment.\",\n      \"columnId\": \"done\",\n      \"priority\": \"high\",\n      \"tags\": [\"feature\"],\n      \"assignees\": [{ \"id\": \"user-2\", \"name\": \"James Chen\" }],\n      \"subtasks\": [\n        {\n          \"id\": \"subtask-3-1\",\n          \"title\": \"Set up GitHub Actions workflow\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-3-2\",\n          \"title\": \"Configure test automation\",\n          \"completed\": true\n        },\n        {\n          \"id\": \"subtask-3-3\",\n          \"title\": \"Set up staging deployment\",\n          \"completed\": true\n        }\n      ],\n      \"dueDate\": \"2025-12-10T00:00:00.000Z\",\n      \"createdAt\": \"2024-01-03T00:00:00.000Z\"\n    },\n    {\n      \"id\": \"card-4\",\n      \"title\": \"Mobile responsiveness\",\n      \"description\": \"Ensure all components are responsive and work well on mobile devices.\",\n      \"columnId\": \"backlog\",\n      \"priority\": \"low\",\n      \"tags\": [\"bug\"],\n      \"assignees\": [\n        { \"id\": \"user-1\", \"name\": \"Emma Wilson\" },\n        { \"id\": \"user-5\", \"name\": \"Aisha Patel\" }\n      ],\n      \"subtasks\": [\n        {\n          \"id\": \"subtask-4-1\",\n          \"title\": \"Audit current breakpoints\",\n          \"completed\": false\n        },\n        {\n          \"id\": \"subtask-4-2\",\n          \"title\": \"Fix navigation on mobile\",\n          \"completed\": false\n        }\n      ],\n      \"dueDate\": \"2025-12-25T00:00:00.000Z\",\n      \"createdAt\": \"2024-01-04T00:00:00.000Z\"\n    }\n  ]\n}\n",
      "type": "registry:file",
      "target": "~/components/blocks/kanban-board/data.json"
    }
  ]
}